(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{81699:function(e,t,n){Promise.resolve().then(n.bind(n,47474))},95381:function(e,t,n){"use strict";var l=n(90265);t.Z=l.Z},47474:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var l=n(57437),r=n(2265),i=n(50413),s=n(30252),a=n(9957),o=n(77733),c=n(95381),u=n(25325),d=n(24772),h=n(55293),v=n(74011),f=n(57834),m=n(97361),x=n(99765),_=n(16463),j=n(77738);let{Text:p,Paragraph:y}=s.default;var A=e=>{var t;let{visible:n,onClose:i,data:s}=e,[a,o]=(0,r.useState)({...s});(0,r.useEffect)(()=>{o({...s})},[s]);let c=async()=>{i()};return(0,l.jsxs)(j.Z,{title:(0,l.jsx)("h3",{style:{textAlign:"center"},children:"View Announcement"}),open:n,onCancel:c,footer:null,width:1e3,children:[(0,l.jsx)(y,{strong:!0,children:null==s?void 0:s.title}),(0,l.jsx)(y,{children:null==s?void 0:s.description}),(null==s?void 0:null===(t=s.file_uploaded)||void 0===t?void 0:t.length)>0?(0,l.jsx)(d.Z,{itemLayout:"horizontal",dataSource:null==s?void 0:s.file_uploaded,renderItem:e=>(0,l.jsx)(d.Z.Item,{children:(0,l.jsx)(h.Z,{style:{width:"100%",padding:0},styles:{body:{padding:"2px 16px"}},children:(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,l.jsx)(v.Z,{src:null==e?void 0:e.thumbUrl,alt:null==e?void 0:e.name,style:{maxHeight:80,objectFit:"cover"}}),(0,l.jsx)(p,{className:"pl-2",children:null==e?void 0:e.name})]})})})}):(0,l.jsx)(l.Fragment,{}),(0,l.jsxs)(y,{children:["Created on: ",x.I.formatDate(null==s?void 0:s.created_on)]})]})};let{Text:E}=s.default;var g=()=>{let[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[j,p]=(0,r.useState)(!0),[y,g]=(0,r.useState)(!1),[N,w]=(0,r.useState)([null,null]),[T,D]=(0,r.useState)(null),[M,O]=(0,r.useState)(""),b=(0,_.useRouter)(),{RangePicker:C}=a.default,Z=async()=>{try{let e=await m.Z.getVisibleAnnouncements();t(e),s(e)}catch(e){throw console.error(e),e}finally{p(!1)}};(0,r.useEffect)(()=>{Z()},[b]);let I=e=>{Y(e,N)},Y=(t,n)=>{let l=RegExp(t,"i"),[r,i]=n||[null,null];s(e.filter(e=>{let t=l.test(e.title),n=new Date(e.created_on);return t&&(!r||!i||n>=r&&n<=i)}))},S=e=>{D(e),g(!0)};return(0,l.jsxs)(i.default,{title:"Announcements",children:[(0,l.jsx)(A,{visible:y,onClose:()=>{g(!1),D(null)},data:T}),(0,l.jsx)(o.Z,{style:{justifyContent:"space-between",marginBottom:16},children:(0,l.jsxs)(c.Z,{style:{display:"flex",gap:"8px"},span:16,children:[(0,l.jsx)(u.default,{placeholder:"Search Announcement",onChange:e=>I(e.target.value?[e.target.value]:[]),prefix:(0,l.jsx)(f.Z,{}),size:"large",style:{width:"60%"}}),(0,l.jsx)(C,{onChange:e=>{w(e),Y(M,e)},style:{width:"40%"}})]})}),(0,l.jsx)("div",{className:"custom-list",children:(0,l.jsx)(d.Z,{grid:{gutter:16,column:4},dataSource:n,renderItem:e=>{var t,n,r;return(0,l.jsx)(d.Z.Item,{children:(0,l.jsxs)(h.Z,{onClick:()=>S(e),title:null==e?void 0:e.title,cover:(null==e?void 0:null===(t=e.file_uploaded)||void 0===t?void 0:t.length)?(0,l.jsx)(v.Z,{alt:null==e?void 0:e.title,src:null==e?void 0:null===(r=e.file_uploaded)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.thumbUrl,preview:!1}):null,hoverable:!0,children:[(0,l.jsxs)(E,{children:[null==e?void 0:e.description,(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]}),(0,l.jsx)(E,{children:x.I.formatDate(null==e?void 0:e.created_on)})]})})}})})]})}},97361:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var l=n(91413),r=n(86863);n(37221);class i{static async createAnnouncement(e){try{await r.O.post(l.P.CREATE_ANNOUNCEMENT,e)}catch(e){throw console.error(e),e}}}i.getAllAnnouncements=async()=>{try{let e=await r.O.get(l.P.FIND_ALL_ANNOUNCEMENT);return e.sort((e,t)=>new Date(t.created_on).getTime()-new Date(e.created_on).getTime()),e}catch(e){throw console.error(e),e}},i.getVisibleAnnouncements=async()=>{try{let e=await r.O.get(l.P.FIND_VISIBLE_ANNOUNCEMENT);return e.sort((e,t)=>new Date(t.created_on).getTime()-new Date(e.created_on).getTime()),e}catch(e){throw console.error(e),e}},i.updateAnnouncement=async(e,t)=>{try{await r.O.patch(l.P.EDIT_ANNOUNCEMENT,t,{id:e})}catch(e){throw console.error(e),e}},i.updateAnnouncementVisibility=async(e,t)=>{try{await r.O.patch(l.P.EDIT_ANNOUNCEMENT,{visibility:t},{id:e})}catch(e){throw console.error(e),e}}},99765:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var l=n(62737),r=n.n(l);class i{static formatDate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.DEFAULT_DATE_FORMAT;return e?r()(e).format(t):""}}i.DEFAULT_DATE_FORMAT="YYYY-MM-DD",i.DEFAULT_DATE_TIME_FORMAT="YYYY-MM-DD HH:mm:ss",i.CATEGORY_DATE_FORMAT="DD MMM YYYY"},37221:function(){}},function(e){e.O(0,[3276,9665,3419,5325,252,4717,5913,5293,7460,7382,7373,7738,806,9957,4772,413,2971,7023,1744],function(){return e(e.s=81699)}),_N_E=e.O()}]);