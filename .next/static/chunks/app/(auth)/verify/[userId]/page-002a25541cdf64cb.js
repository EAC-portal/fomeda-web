(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8198],{40569:function(e,i,t){Promise.resolve().then(t.bind(t,39961))},95381:function(e,i,t){"use strict";var n=t(90265);i.Z=n.Z},39961:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return x}});var n=t(57437),r=t(2265),l=t(30252),a=t(77733),s=t(95381),o=t(74011),c=t(55293),d=t(73454),u=t(25325),h=t(46682),f=t(16463),p=t(50413),y=t(68788),g=t(82649);let{Title:m,Link:v}=l.default;function x(){let e=(0,f.useRouter)(),i=(0,f.usePathname)(),[t,v]=(0,r.useState)(!1),[x,Z]=(0,r.useState)(!1),[j,w]=(0,r.useState)(0),k=i.substring(i.lastIndexOf("/")+1);(0,r.useEffect)(()=>{let e;return j>0&&(e=setInterval(()=>{w(i=>i<=1?(clearInterval(e),0):i-1)},1e3)),()=>clearInterval(e)},[j]);let b=async i=>{v(!0);try{let t=await y.Z.getEmail(k),n=null==t?void 0:t.email_address,r={...i,email:n};await y.Z.verifyOtp(r).then(i=>{(null==i?void 0:i.verified)?(g.Z.success("Verification Code Successful","Valid verification code was entered."),e.push("/reset-password/".concat(k))):g.Z.error("Verification Code Failed","Invalid verifciation code was entered. Please try again")})}catch(e){console.error(e),g.Z.error("Error Fetching Info","An error occurred while trying to retrieve account information. Please try again later.")}finally{v(!1)}},P=async()=>{Z(!0);try{let e=await y.Z.getEmail(k),i=null==e?void 0:e.email_address;await y.Z.sendOtp({email:i}),g.Z.info("Verification Code Sent","A verification code has been sent to your email."),w(60)}catch(e){console.error("Error sending OTP:",e),g.Z.error("Error","An error occurred while sending the verification code. Please try again later.")}finally{Z(!1)}};return(0,n.jsx)(p.default,{showTitle:!1,children:(0,n.jsxs)(a.Z,{align:"middle",justify:"space-evenly",style:{height:"100vh"},children:[(0,n.jsx)(s.Z,{children:(0,n.jsx)(o.Z,{preview:!1,src:"/logoFomeda.svg",alt:"fomeda-logo"})}),(0,n.jsx)(s.Z,{children:(0,n.jsx)(c.Z,{children:(0,n.jsxs)(d.Z,{name:"verification_code",layout:"vertical",autoComplete:"off",onFinish:b,onFinishFailed:e=>{console.log("Failed:",e)},style:{width:"440px"},children:[(0,n.jsx)(m,{level:2,children:"Verification code"}),(0,n.jsx)(l.default,{style:{paddingTop:"5px"},children:"Please click the send code link to send verification code to the email."}),(0,n.jsxs)(a.Z,{align:"middle",children:[(0,n.jsx)(s.Z,{children:(0,n.jsx)(d.Z.Item,{label:"Verification code",name:"otp",rules:[{required:!0,message:"Please enter the verification code"}],hasFeedback:!0,style:{paddingTop:"5px"},children:(0,n.jsx)(u.default.OTP,{})})}),(0,n.jsx)(s.Z,{style:{display:"flex",alignItems:"center",height:"100%"},children:(0,n.jsx)(h.ZP,{onClick:P,disabled:j>0,loading:x,type:"link",style:{paddingTop:"8px"},children:j>0?"Send in ".concat(j,"s"):"Send code"})})]}),(0,n.jsxs)(d.Z.Item,{children:[(0,n.jsx)("div",{style:{marginTop:"10px"},children:(0,n.jsx)(h.ZP,{block:!0,type:"primary",htmlType:"submit",loading:t,children:"Submit"})}),(0,n.jsx)("div",{style:{marginTop:"10px"},children:(0,n.jsx)(h.ZP,{block:!0,type:"default",onClick:()=>{e.push("/forget-password")},children:"Back"})})]})]})})})]})})}}},function(e){e.O(0,[3276,9665,3419,3454,5325,252,4717,5913,5293,413,2971,7023,1744],function(){return e(e.s=40569)}),_N_E=e.O()}]);