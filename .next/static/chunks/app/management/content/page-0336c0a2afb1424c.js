(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3098],{84407:function(e,t,i){Promise.resolve().then(i.bind(i,52282))},56115:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var a=i(22988),l=i(2265),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},r=i(25636),s=l.forwardRef(function(e,t){return l.createElement(r.Z,(0,a.Z)({},e,{ref:t,icon:n}))})},1071:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var a=i(22988),l=i(2265),n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},r=i(25636),s=l.forwardRef(function(e,t){return l.createElement(r.Z,(0,a.Z)({},e,{ref:t,icon:n}))})},52282:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Y}});var a=i(57437),l=i(2265),n=i(50413),r=i(99368),s=i(46682),o=i(74011),c=i(77733),d=i(65783);class u{}u.ADD_CAROUSEL="add_carousel",u.EDIT_CAROUSEL="edit_carousel",u.DELETE_CAROUSEL="delete_carousel",u.ADD_HISTORY_TIMELINE="add_history_timeline",u.EDIT_HISTORY_TIMELINE="edit_history_timeline",u.DELETE_HISTORY_TIMELINE="delete_history_timeline",u.ADD_CONTENT="add_content",u.EDIT_CONTENT="edit_content",u.DELETE_CONTENT="delete_content";let m=[{key:"no",title:"No",dataIndex:"no",width:"5%"},{key:"image",title:"Image",dataIndex:"image",width:"85%"},{key:"actions",title:"Actions",actionList:[{key:"edit_carousel",label:"Edit Carousel",link:""},{key:"delete_carousel",label:"Delete Carousel",link:""}]}],h=[{key:"no",title:"No",dataIndex:"subcat_spec_name",width:"5%"},{key:"title",title:"Content title",dataIndex:"title",width:"25%"},{key:"description",title:"Content description",dataIndex:"description",width:"60%"},{key:"actions",title:"Actions",actionList:[{key:"edit_content",label:"Edit Content"},{key:"delete_content",label:"Delete Content"}]}],y=[{key:"no",title:"No",dataIndex:"subcat_spec_name",width:"5%"},{key:"title",title:"Timeline title",dataIndex:"title",width:"25%"},{key:"description",title:"Timeline description",dataIndex:"description",width:"40%"},{key:"date",title:"Timeline date",dataIndex:"date",width:"20%"},{key:"actions",title:"Actions",actionList:[{key:"edit_history_timeline",label:"Edit History Timeline"},{key:"delete_history_timeline",label:"Delete History Timeline"}]}],p={add_carousel:{type:"add_carousel",title:"Add Carousel",fields:[{name:"image",label:"Upload Image",type:"file"}]},edit_carousel:{type:"edit_carousel",title:"Edit Carousel",fields:[{name:"image",label:"Upload Image",type:"file"}]},delete_carousel:{type:"delete_carousel",title:"Delete Carousel",fields:[]},add_content:{type:"add_content",title:"Add Content",fields:[{name:"title",label:"Content title",type:"text"},{name:"description",label:"Content description",type:"textarea"}]},edit_content:{type:"edit_content",title:"Edit Content",fields:[{name:"title",label:"Content title",type:"text"},{name:"description",label:"Content description",type:"textarea"}]},delete_content:{type:"delete_content",title:"Delete Content",fields:[]},add_history_timeline:{type:"add_history_timeline",title:"Add History Timeline",fields:[{name:"title",label:"Title",type:"text"},{name:"description",label:"Description",type:"textarea"},{name:"date",label:"Date",type:"date"}]},edit_history_timeline:{type:"edit_history_timeline",title:"Edit History Timeline",fields:[{name:"title",label:"Title",type:"text"},{name:"description",label:"Description",type:"textarea"},{name:"date",label:"Date",type:"date"}]},delete_history_timeline:{type:"delete_history_timeline",title:"Delete History Timeline",fields:[]}};var _=i(54149),T=i(25325),x=i(73454),E=i(77738),w=i(9957),C=i(91518),f=i(1071);let{TextArea:g}=T.default;var j=e=>{let{isOpen:t,type:i,title:n,fields:r,onSubmit:c,onCancel:d}=e,[u]=x.Z.useForm(),[m,h]=(0,l.useState)([]),[y,p]=(0,l.useState)(!1),[_,j]=(0,l.useState)("");(0,l.useEffect)(()=>{t&&(h([]),u.resetFields())},[t,u]);let b=e=>new Promise((t,i)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>i(e)}),I=async e=>{let{fileList:t}=e;if(h(t),t[0]){let e={name:t[0].name,percent:t[0].percent,size:t[0].percent,type:t[0].type,uid:t[0].uid,base64:await b(t[0].originFileObj),thumbUrl:t[0].thumbUrl};u.setFieldsValue({image:e})}},D=async e=>{let t=m.filter(t=>t.uid!==e.uid);h(t),u.setFieldsValue({image:t})},v=async e=>{e.base64||e.preview||(e.preview=await b(e.originFileObj)),j(e.base64||e.preview),p(!0)};return(0,a.jsx)(E.Z,{open:t,title:(0,a.jsxs)("h3",{style:{textAlign:"center"},children:[" ",n," "]}),onCancel:()=>{u.resetFields(),d()},onOk:()=>{u.validateFields().then(async e=>{u.resetFields(),c(e,i)}).catch(e=>{console.log("Validate Failed:",e)})},cancelText:"Cancel",okText:"Add",width:1e3,children:(0,a.jsx)(x.Z,{form:u,layout:"vertical",children:null==r?void 0:r.map((e,t)=>{let{name:i,label:l,type:n}=e;return(0,a.jsxs)("div",{children:["text"===n&&(0,a.jsx)(x.Z.Item,{name:i,label:l,rules:[{required:!0,message:"Please enter the ".concat(l.toLowerCase())}],children:(0,a.jsx)(T.default,{placeholder:l})},i),"textarea"===n&&(0,a.jsx)(x.Z.Item,{name:i,label:l,rules:[{required:!0,message:"Please enter the ".concat(l.toLowerCase())}],children:(0,a.jsx)(g,{autoSize:{minRows:4,maxRows:8},placeholder:l})},i),"date"===n&&(0,a.jsx)(x.Z.Item,{name:i,label:l,rules:[{required:!0,message:"Please enter the ".concat(l.toLowerCase())}],children:(0,a.jsx)(w.default,{format:"DD-MM-YYYY"})},i),"file"===n&&(0,a.jsxs)(x.Z.Item,{name:i,label:l,rules:[{required:!0,message:"Please upload the ".concat(l.toLowerCase())}],children:[(0,a.jsx)(C.Z,{name:"file",accept:".jpg,.jpeg,.png",beforeUpload:()=>!1,listType:"picture",maxCount:1,multiple:!1,fileList:m,onPreview:v,onChange:I,onRemove:D,children:(0,a.jsx)(s.ZP,{icon:(0,a.jsx)(f.Z,{}),children:"Upload Image (Max: 1)"})}),_&&(0,a.jsx)(o.Z,{wrapperStyle:{display:"none"},preview:{visible:y,onVisibleChange:e=>p(e),afterOpenChange:e=>!e&&j("")},src:_,alt:""})]},i)]},t)})})})},b=i(62737),I=i.n(b);let{TextArea:D}=T.default;var v=e=>{let{data:t,type:i,isOpen:n,title:r,fields:c,onSubmit:d,onCancel:u}=e,[m]=x.Z.useForm(),[h,y]=(0,l.useState)([]),[p,_]=(0,l.useState)(!1),[g,j]=(0,l.useState)("");(0,l.useEffect)(()=>{if(t){let e={...t,date:t.date?I()(t.date):null};(null==t?void 0:t.image)&&y([null==t?void 0:t.image]),m.setFieldsValue(e)}},[t,m]);let b=async e=>{let{fileList:t}=e;if(y(t),t[0]){let e={name:t[0].name,percent:t[0].percent,size:t[0].percent,type:t[0].type,uid:t[0].uid,base64:await L(t[0].originFileObj),thumbUrl:t[0].thumbUrl};m.setFieldsValue({image:e})}},v=async e=>{y([]),m.resetFields(["image"])},O=async e=>{e.base64||e.preview||(e.preview=await L(e.originFileObj)),j(e.base64||e.preview),_(!0)},L=e=>new Promise((t,i)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=()=>t(a.result),a.onerror=e=>i(e)});return(0,a.jsx)(E.Z,{open:n,title:(0,a.jsxs)("h3",{style:{textAlign:"center"},children:[" ",r," "]}),onCancel:()=>{m.resetFields(),u()},onOk:()=>{m.validateFields().then(e=>{d({...t,...e},i),m.resetFields()}).catch(e=>{console.log("Validate Failed:",e)})},cancelText:"Cancel",okText:"Save",width:1e3,children:(0,a.jsx)(x.Z,{form:m,layout:"vertical",children:null==c?void 0:c.map((e,t)=>{let{name:i,label:l,type:n}=e;return(0,a.jsxs)("div",{children:["text"===n&&(0,a.jsx)(x.Z.Item,{name:i,label:l,rules:[{required:!0,message:"Please enter the ".concat(l.toLowerCase())}],children:(0,a.jsx)(T.default,{placeholder:i})},i),"textarea"===n&&(0,a.jsx)(x.Z.Item,{name:i,label:l,rules:[{required:!0,message:"Please enter the ".concat(l.toLowerCase())}],children:(0,a.jsx)(D,{autoSize:{minRows:4,maxRows:8},placeholder:l})},i),"date"===n&&(0,a.jsx)(x.Z.Item,{name:i,label:l,rules:[{required:!0,message:"Please enter the ".concat(l.toLowerCase())}],children:(0,a.jsx)(w.default,{value:"2022",format:"DD-MM-YYYY"})},i),"file"===n&&(0,a.jsxs)(x.Z.Item,{name:i,label:l,rules:[{required:!0,message:"Please upload the ".concat(l.toLowerCase())}],children:[(0,a.jsx)(C.Z,{name:"file",accept:".jpg,.jpeg,.png",listType:"picture",maxCount:1,multiple:!1,fileList:h,onPreview:O,onChange:b,onRemove:v,children:(0,a.jsx)(s.ZP,{icon:(0,a.jsx)(f.Z,{}),children:"Upload Image (Max: 1)"})}),g&&(0,a.jsx)(o.Z,{wrapperStyle:{display:"none"},preview:{visible:p,onVisibleChange:e=>_(e),afterOpenChange:e=>!e&&j("")},src:g,alt:""})]},i)]},t)})})})},O=i(30252),L=i(99765);let{Title:A,Paragraph:Z,Text:S,Link:N}=O.default;var k=e=>{let{data:t,type:i,isOpen:n,title:r,onSubmit:s,onCancel:c}=e;return(0,l.useEffect)(()=>{if(n){var e,l;E.Z.confirm({title:(0,a.jsx)("h3",{children:"Confirmation"}),content:(0,a.jsxs)("div",{children:[(0,a.jsx)(Z,{children:"Are you sure you want to delete the following record?"}),(0,a.jsxs)(Z,{children:["delete_carousel"===i&&(0,a.jsx)(o.Z,{src:null==t?void 0:null===(e=t.image)||void 0===e?void 0:e.base64,alt:null==t?void 0:null===(l=t.image)||void 0===l?void 0:l.name,preview:!1}),"delete_content"===i&&(0,a.jsxs)("div",{children:[(0,a.jsx)(S,{strong:!0,children:"Content title: "}),(0,a.jsx)(S,{children:null==t?void 0:t.title}),(0,a.jsx)("br",{}),(0,a.jsx)(S,{strong:!0,children:"Content description: "}),(0,a.jsx)(S,{children:null==t?void 0:t.description})]}),"delete_history_timeline"===i&&(0,a.jsxs)("div",{children:[(0,a.jsx)(S,{strong:!0,children:"Timeline title: "}),(0,a.jsx)(S,{children:null==t?void 0:t.title}),(0,a.jsx)("br",{}),(0,a.jsx)(S,{strong:!0,children:"Timeline description: "}),(0,a.jsx)(S,{children:null==t?void 0:t.description}),(0,a.jsx)("br",{}),(0,a.jsx)(S,{strong:!0,children:"Timeline date: "}),(0,a.jsx)(S,{children:L.I.formatDate(null==t?void 0:t.date)})]})]})]}),className:"confirmation-modal",centered:!0,width:"35%",okText:"Confirm",cancelText:"Cancel",onOk:()=>s(t,i),onCancel:c})}},[n,c,s,t,i,r]),null},R=i(56115),F=i(16463),M=i(49714),P=i(44785),Y=()=>{let[e,t]=(0,l.useState)([]),[i,T]=(0,l.useState)([]),[x,E]=(0,l.useState)([]),[w,C]=(0,l.useState)([]),[f,g]=(0,l.useState)(!1),[b,I]=(0,l.useState)(!1),[D,O]=(0,l.useState)(!1),[A,Z]=(0,l.useState)({}),[S,N]=(0,l.useState)(),Y=(0,F.useRouter)();(0,l.useEffect)(()=>{H(),U(),V()},[Y]);let H=async()=>{try{let e=await _.Z.getAllCarousels();t(e)}catch(e){throw console.error(e),e}},U=async()=>{try{let e=await _.Z.getAllContent();T(e)}catch(e){throw console.error(e),e}},V=async()=>{try{let e=await _.Z.getAllHistoryTimeline();E(e)}catch(e){throw console.error(e),e}},q={[u.ADD_CAROUSEL]:_.Z.createCarousel,[u.EDIT_CAROUSEL]:_.Z.updateCarousel,[u.DELETE_CAROUSEL]:_.Z.deleteCarousel,[u.ADD_CONTENT]:_.Z.createContent,[u.EDIT_CONTENT]:_.Z.updateContent,[u.DELETE_CONTENT]:_.Z.deleteContent,[u.ADD_HISTORY_TIMELINE]:_.Z.createHistoryTimeline,[u.EDIT_HISTORY_TIMELINE]:_.Z.updateHistoryTimeline,[u.DELETE_HISTORY_TIMELINE]:_.Z.deleteHistoryTimeline},z=e=>{Z({...p[e],onSubmit:W,onCancel:B}),e.startsWith("add_")?g(!0):e.startsWith("edit_")?I(!0):e.startsWith("delete_")&&O(!0)},W=async(e,t)=>{var i;let a;let l=P.Z.get("token");if(l)try{a=(0,M.o)(l)}catch(e){console.error(e)}let n=null!==(i=null==a?void 0:a.user_id)&&void 0!==i?i:"UndefinedAdmin",r={...e,...t.startsWith("add_")?{created_by:n}:{},last_updated_by:n},s=q[t];try{t.startsWith("add_")?await s(r):t.startsWith("edit_")?await s(e._id,r):t.startsWith("delete_")&&await s(e._id),H(),U(),V()}catch(e){throw console.error(e),e}B()},B=()=>{g(!1),I(!1),O(!1)},G=(e,t)=>e.map(e=>({key:e.key,label:(0,a.jsx)("div",{onClick:()=>{C(t),z(e.key)},children:e.label})})).filter(e=>null!==e),J=(e,t)=>(0,a.jsx)(r.Z,{menu:{items:G(e,t)},children:(0,a.jsx)(s.ZP,{children:"Actions"})}),K=e=>e.map(e=>{switch(e.key){case"actions":return{...e,render:(t,i)=>J(e.actionList,i)};case"created_on":case"last_updated_on":case"date":return{...e,render:(t,i)=>L.I.formatDate(i[e.key]),sorter:(t,i)=>new Date(t[e.key]).getTime()-new Date(i[e.key]).getTime()};case"image":return{...e,render:e=>(0,a.jsx)(o.Z,{src:null==e?void 0:e.base64,alt:null==e?void 0:e.name,width:"25%"})};case"no":return{...e,render:(e,t,i)=>i+1};default:return{...e,sorter:(t,i)=>(t[e.key]||"").toString().localeCompare((i[e.key]||"").toString())}}return e});return(0,a.jsxs)(n.default,{title:"Content Management",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(c.Z,{className:"mb-2 justify-between",children:[(0,a.jsx)("h3",{children:"Carousel"}),(0,a.jsx)(s.ZP,{type:"primary",icon:(0,a.jsx)(R.Z,{}),onClick:()=>z("add_carousel"),children:"Add carousel"})]}),(0,a.jsx)(d.Z,{className:"mb-8",columns:K(m),dataSource:e.map(e=>({...e,key:e._id})),pagination:!1})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(c.Z,{className:"mb-2 justify-between",children:[(0,a.jsx)("h3",{children:"Content"}),(0,a.jsx)(s.ZP,{type:"primary",icon:(0,a.jsx)(R.Z,{}),onClick:()=>z("add_content"),children:"Add content"})]}),(0,a.jsx)(d.Z,{columns:K(h),dataSource:i.map(e=>({...e,key:e._id})),pagination:!1,showSorterTooltip:!1})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(c.Z,{className:"mb-2 justify-between",children:[(0,a.jsx)("h3",{children:"History timeline"}),(0,a.jsx)(s.ZP,{type:"primary",icon:(0,a.jsx)(R.Z,{}),onClick:()=>z("add_history_timeline"),children:"Add history timeline"})]}),(0,a.jsx)(d.Z,{columns:K(y),dataSource:x.map(e=>({...e,key:e._id})),pagination:!1})]}),(0,a.jsx)(j,{isOpen:f,type:A.type,title:A.title,fields:A.fields,onSubmit:A.onSubmit,onCancel:A.onCancel}),(0,a.jsx)(v,{data:w,isOpen:b,type:A.type,title:A.title,fields:A.fields,onSubmit:A.onSubmit,onCancel:A.onCancel}),(0,a.jsx)(k,{data:w,isOpen:D,type:A.type,title:A.title,onSubmit:A.onSubmit,onCancel:A.onCancel})]})}},54149:function(e,t,i){"use strict";i.d(t,{Z:function(){return n}});var a=i(91413),l=i(86863);class n{static async createCarousel(e){try{return await l.O.post(a.P.CREATE_CAROUSEL,e)}catch(e){throw console.error(e),e}}static async createContent(e){try{return await l.O.post(a.P.CREATE_CONTENT,e)}catch(e){throw console.error(e),e}}static async createHistoryTimeline(e){try{return await l.O.post(a.P.CREATE_HISTORY_TIMELINE,e)}catch(e){throw console.error(e),e}}}n.getAllCarousels=async()=>{try{return await l.O.get(a.P.FIND_ALL_CAROUSEL)}catch(e){throw console.error(e),e}},n.getVisibleCarousels=async()=>{try{return await l.O.get(a.P.FIND_VISIBLE_CAROUSEL)}catch(e){throw console.error(e),e}},n.updateCarousel=async(e,t)=>{try{return await l.O.patch(a.P.EDIT_CAROUSEL,t,{id:e})}catch(e){throw console.error(e),e}},n.deleteCarousel=async e=>{try{await l.O.delete(a.P.DELETE_CAROUSEL,{id:e})}catch(e){throw console.error(e),e}},n.getAllContent=async()=>{try{return await l.O.get(a.P.FIND_ALL_CONTENT)}catch(e){throw console.error(e),e}},n.getVisibleContent=async()=>{try{return await l.O.get(a.P.FIND_VISIBLE_CONTENT)}catch(e){throw console.error(e),e}},n.updateContent=async(e,t)=>{try{return await l.O.patch(a.P.EDIT_CONTENT,t,{id:e})}catch(e){throw console.error(e),e}},n.deleteContent=async e=>{try{await l.O.delete(a.P.DELETE_CONTENT,{id:e})}catch(e){throw console.error(e),e}},n.getAllHistoryTimeline=async()=>{try{let e=await l.O.get(a.P.FIND_ALL_HISTORY_TIMELINE);return e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),e}catch(e){throw console.error(e),e}},n.getVisibleHistoryTimeline=async()=>{try{let e=await l.O.get(a.P.FIND_VISIBLE_HISTORY_TIMELINE);return e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),e}catch(e){throw console.error(e),e}},n.updateHistoryTimeline=async(e,t)=>{try{return await l.O.patch(a.P.EDIT_HISTORY_TIMELINE,t,{id:e})}catch(e){throw console.error(e),e}},n.deleteHistoryTimeline=async e=>{try{await l.O.delete(a.P.DELETE_HISTORY_TIMELINE,{id:e})}catch(e){throw console.error(e),e}}},99765:function(e,t,i){"use strict";i.d(t,{I:function(){return n}});var a=i(62737),l=i.n(a);class n{static formatDate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_DATE_FORMAT;return e?l()(e).format(t):""}}n.DEFAULT_DATE_FORMAT="YYYY-MM-DD",n.DEFAULT_DATE_TIME_FORMAT="YYYY-MM-DD HH:mm:ss",n.CATEGORY_DATE_FORMAT="DD MMM YYYY"}},function(e){e.O(0,[3276,9665,3419,3454,5325,252,7460,7382,7373,7738,4052,6487,5783,6326,1518,806,9957,413,2971,7023,1744],function(){return e(e.s=84407)}),_N_E=e.O()}]);