(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5002],{99788:function(e,i,t){Promise.resolve().then(t.bind(t,80319))},95381:function(e,i,t){"use strict";var n=t(90265);i.Z=n.Z},80319:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return g}});var n=t(57437),l=t(2265),r=t(30252),a=t(77733),s=t(95381),c=t(55293),o=t(73454),d=t(25325),u=t(46682),h=t(16463),f=t(50413),p=t(68788),m=t(82649);let{Title:y,Paragraph:v}=r.default;function g(){let e=(0,h.useRouter)(),i=(0,h.usePathname)(),[t,v]=(0,l.useState)(!1),[g,x]=(0,l.useState)(!1),[Z,j]=(0,l.useState)(0),k=i.substring(i.lastIndexOf("/")+1);(0,l.useEffect)(()=>{let e;return Z>0&&(e=setInterval(()=>{j(i=>i<=1?(clearInterval(e),0):i-1)},1e3)),()=>clearInterval(e)},[Z]);let b=async i=>{v(!0);try{let t=await p.Z.getEmail(k),n=null==t?void 0:t.email_address,l={...i,email:n};await p.Z.verifyDeleteOtp(l).then(i=>{(null==i?void 0:i.verified)?(m.Z.success("Verification Code Successful","Valid verification code was entered."),e.push("/management/profile/deactivate-account/".concat(k))):m.Z.error("Verification Code Failed","Invalid verifciation code was entered. Please try again")})}catch(e){console.error(e),m.Z.error("Error Fetching Info","An error occurred while trying to retrieve account information. Please try again later.")}finally{v(!1)}},w=async()=>{x(!0);try{let e=await p.Z.getEmail(k),i=null==e?void 0:e.email_address;await p.Z.sendDeleteOtp({email:i}),m.Z.info("Verification Code Sent","A verification code has been sent to your email."),j(60)}catch(e){console.error("Error sending OTP:",e),m.Z.error("Error","An error occurred while sending the verification code. Please try again later.")}finally{x(!1)}};return(0,n.jsx)(f.default,{showTitle:!1,children:(0,n.jsx)(a.Z,{align:"middle",justify:"space-evenly",style:{height:"100vh"},children:(0,n.jsx)(s.Z,{children:(0,n.jsx)(c.Z,{children:(0,n.jsxs)(o.Z,{name:"verification_code",layout:"vertical",autoComplete:"off",onFinish:b,onFinishFailed:e=>{console.log("Failed:",e)},style:{width:"440px"},children:[(0,n.jsx)(y,{level:2,children:"Verification code"}),(0,n.jsx)(r.default,{style:{paddingTop:"5px"},children:"Please click the send code link to send verification code to the email."}),(0,n.jsxs)(a.Z,{align:"middle",children:[(0,n.jsx)(s.Z,{children:(0,n.jsx)(o.Z.Item,{label:"Verification code",name:"otp",rules:[{required:!0,message:"Please enter the verification code"}],hasFeedback:!0,style:{paddingTop:"5px"},children:(0,n.jsx)(d.default.OTP,{})})}),(0,n.jsx)(s.Z,{style:{display:"flex",alignItems:"center",height:"100%"},children:(0,n.jsx)(u.ZP,{onClick:w,disabled:Z>0,loading:g,type:"link",style:{paddingTop:"8px"},children:Z>0?"Send in ".concat(Z,"s"):"Send code"})})]}),(0,n.jsxs)(o.Z.Item,{children:[(0,n.jsx)("div",{style:{marginTop:"10px"},children:(0,n.jsx)(u.ZP,{block:!0,type:"primary",htmlType:"submit",loading:t,children:"Submit"})}),(0,n.jsx)("div",{style:{marginTop:"10px"},children:(0,n.jsx)(u.ZP,{block:!0,type:"default",onClick:()=>{e.push("/management/profile")},children:"Back"})})]})]})})})})})}}},function(e){e.O(0,[3276,9665,3419,3454,5325,252,4717,5913,5293,413,2971,7023,1744],function(){return e(e.s=99788)}),_N_E=e.O()}]);