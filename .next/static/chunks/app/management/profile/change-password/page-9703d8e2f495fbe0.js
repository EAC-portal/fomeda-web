(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9284],{21352:function(e,s,a){Promise.resolve().then(a.bind(a,58934))},58934:function(e,s,a){"use strict";a.r(s);var r=a(57437),t=a(2265),o=a(50413),n=a(68788),l=a(82649),d=a(30252),i=a(73454),c=a(55293),p=a(25325),u=a(46682),w=a(16463),h=a(44785),m=a(49714);let{Title:f,Paragraph:y}=d.default;s.default=()=>{let[e,s]=(0,t.useState)([]),[a,d]=(0,t.useState)(null),[y]=i.Z.useForm(),[b,x]=(0,t.useState)(!1),[g,P]=(0,t.useState)(!1),Z=(0,w.useRouter)();(0,t.useEffect)(()=>{let e=h.Z.get("token");if(e)try{let a=(0,m.o)(e);s(a)}catch(e){console.error(e)}},[Z,y]);let j=async s=>{x(!0);let{confirm_password:a,...r}=s,t={...r};try{await n.Z.updatePassword(null==e?void 0:e.user_id,t).then(e=>{l.Z.success("Update password","Your password has been updated sucessfully."),Z.push("/management/profile")})}catch(e){console.error(e),e instanceof Error&&"Invalid old password"===e.message&&l.Z.error("Update Password Failed","Invalid old password. Please try again.")}finally{x(!1)}};return(0,r.jsx)(o.default,{showTitle:!1,children:(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)(c.Z,{style:{width:"700px"},children:(0,r.jsxs)(i.Z,{form:y,layout:"vertical",onFinish:j,children:[(0,r.jsx)(f,{level:2,children:"Change password"}),(0,r.jsx)(i.Z.Item,{label:"Old password",name:"password",rules:[{required:!0,message:"Please input your old password"}],children:(0,r.jsx)(p.default.Password,{placeholder:"Old Password"})}),(0,r.jsx)(i.Z.Item,{label:"New Password",name:"new_password",rules:[{required:!0,message:"Please input your new password"},{min:12,max:20,message:"The new password must be between 12 and 20 characters"},{whitespace:!0,message:"The password cannot be whitespaces only"},{pattern:/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[^A-Za-z0-9]).{8,}$/,message:"The new password contains at least one uppercase letter, one lowercase letter, at least one number and at least one special character"}],children:(0,r.jsx)(p.default.Password,{placeholder:"Password"})}),(0,r.jsx)(i.Z.Item,{label:"Confirm password",dependencies:["new_password"],name:"confirm_password",rules:[{required:!0,message:"Please input to confirm your new password"},{min:12,max:20,message:"The confirm password must be between 12 and 20 characters"},{whitespace:!0,message:"The confirm password cannot be whitespaces only"},{pattern:/^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[^A-Za-z0-9]).{8,}$/,message:"The confirm password contains at least one uppercase letter, one lowercase letter, at least one number and at least one special character"},e=>{let{getFieldValue:s}=e;return{validator:(e,a)=>a&&s("new_password")!==a?Promise.reject(Error("The confirm password that you entered does not match with password above")):Promise.resolve()}}],children:(0,r.jsx)(p.default.Password,{placeholder:"Confirm password"})}),(0,r.jsx)(i.Z.Item,{style:{paddingTop:"5px"},children:(0,r.jsx)(u.ZP,{htmlType:"submit",type:"primary",loading:b,block:!0,children:"Change Password"})})]})})})})}}},function(e){e.O(0,[3276,9665,3419,3454,5325,252,4717,5913,5293,413,2971,7023,1744],function(){return e(e.s=21352)}),_N_E=e.O()}]);