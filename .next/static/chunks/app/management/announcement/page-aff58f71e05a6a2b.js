(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3787],{28707:function(e,t,n){Promise.resolve().then(n.bind(n,89454))},56115:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var o=n(22988),r=n(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},a=n(25636),c=r.forwardRef(function(e,t){return r.createElement(a.Z,(0,o.Z)({},e,{ref:t,icon:l}))})},1071:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var o=n(22988),r=n(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},a=n(25636),c=r.forwardRef(function(e,t){return r.createElement(a.Z,(0,o.Z)({},e,{ref:t,icon:l}))})},95381:function(e,t,n){"use strict";var o=n(90265);t.Z=o.Z},23062:function(e,t,n){"use strict";n.d(t,{N:function(){return o}});let o=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:"color ".concat(e.motionDurationSlow),"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}})},3650:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var o=n(2265),r=n(56800),l=n.n(r),a=n(88474),c=n(25629),i=n(63575),s=n(76415),u=n(50511),d=n(38750),m=n(32920),p=n(70142),h=n(98170),y=n(73204),f=n(75600);let g=e=>{let{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:o,componentCls:r,calc:l}=e,a=l(o).sub(n).equal(),c=l(t).sub(n).equal();return{[r]:Object.assign(Object.assign({},(0,h.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:a,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:"".concat((0,m.unit)(e.lineWidth)," ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusSM,opacity:1,transition:"all ".concat(e.motionDurationMid),textAlign:"start",position:"relative",["&".concat(r,"-rtl")]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},["".concat(r,"-close-icon")]:{marginInlineStart:c,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:"all ".concat(e.motionDurationMid),"&:hover":{color:e.colorTextHeading}},["&".concat(r,"-has-color")]:{borderColor:"transparent",["&, a, a:hover, ".concat(e.iconCls,"-close, ").concat(e.iconCls,"-close:hover")]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",["&:not(".concat(r,"-checkable-checked):hover")]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},["> ".concat(e.iconCls," + span, > span + ").concat(e.iconCls)]:{marginInlineStart:a}}),["".concat(r,"-borderless")]:{borderColor:"transparent",background:e.tagBorderlessBg}}},b=e=>{let{lineWidth:t,fontSizeIcon:n,calc:o}=e,r=e.fontSizeSM;return(0,y.TS)(e,{tagFontSize:r,tagLineHeight:(0,m.unit)(o(e.lineHeightSM).mul(r).equal()),tagIconSize:o(n).sub(o(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},v=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText});var x=(0,f.I$)("Tag",e=>g(b(e)),v),C=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)0>t.indexOf(o[r])&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};let k=o.forwardRef((e,t)=>{let{prefixCls:n,style:r,className:a,checked:c,onChange:i,onClick:s}=e,u=C(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:m,tag:p}=o.useContext(d.E_),h=m("tag",n),[y,f,g]=x(h),b=l()(h,"".concat(h,"-checkable"),{["".concat(h,"-checkable-checked")]:c},null==p?void 0:p.className,a,f,g);return y(o.createElement("span",Object.assign({},u,{ref:t,style:Object.assign(Object.assign({},r),null==p?void 0:p.style),className:b,onClick:e=>{null==i||i(!c),null==s||s(e)}})))});var A=n(57758);let w=e=>(0,A.Z)(e,(t,n)=>{let{textColor:o,lightBorderColor:r,lightColor:l,darkColor:a}=n;return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:o,background:l,borderColor:r,"&-inverse":{color:e.colorTextLightSolid,background:a,borderColor:a},["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}});var j=(0,f.bk)(["Tag","preset"],e=>w(b(e)),v);let _=(e,t,n)=>{let o="string"!=typeof n?n:n.charAt(0).toUpperCase()+n.slice(1);return{["".concat(e.componentCls).concat(e.componentCls,"-").concat(t)]:{color:e["color".concat(n)],background:e["color".concat(o,"Bg")],borderColor:e["color".concat(o,"Border")],["&".concat(e.componentCls,"-borderless")]:{borderColor:"transparent"}}}};var E=(0,f.bk)(["Tag","status"],e=>{let t=b(e);return[_(t,"success","Success"),_(t,"processing","Info"),_(t,"error","Error"),_(t,"warning","Warning")]},v),Z=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)0>t.indexOf(o[r])&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n};let S=o.forwardRef((e,t)=>{let{prefixCls:n,className:r,rootClassName:m,style:p,children:h,icon:y,color:f,onClose:g,bordered:b=!0,visible:v}=e,C=Z(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:k,direction:A,tag:w}=o.useContext(d.E_),[_,S]=o.useState(!0),O=(0,a.Z)(C,["closeIcon","closable"]);o.useEffect(()=>{void 0!==v&&S(v)},[v]);let T=(0,c.o2)(f),N=(0,c.yT)(f),I=T||N,P=Object.assign(Object.assign({backgroundColor:f&&!I?f:void 0},null==w?void 0:w.style),p),D=k("tag",n),[M,F,L]=x(D),R=l()(D,null==w?void 0:w.className,{["".concat(D,"-").concat(f)]:I,["".concat(D,"-has-color")]:f&&!I,["".concat(D,"-hidden")]:!_,["".concat(D,"-rtl")]:"rtl"===A,["".concat(D,"-borderless")]:!b},r,m,F,L),H=e=>{e.stopPropagation(),null==g||g(e),e.defaultPrevented||S(!1)},[,z]=(0,i.Z)((0,i.w)(e),(0,i.w)(w),{closable:!1,closeIconRender:e=>{let t=o.createElement("span",{className:"".concat(D,"-close-icon"),onClick:H},e);return(0,s.wm)(e,t,e=>({onClick:t=>{var n;null===(n=null==e?void 0:e.onClick)||void 0===n||n.call(e,t),H(t)},className:l()(null==e?void 0:e.className,"".concat(D,"-close-icon"))}))}}),U="function"==typeof C.onClick||h&&"a"===h.type,V=y||null,q=V?o.createElement(o.Fragment,null,V,h&&o.createElement("span",null,h)):h,B=o.createElement("span",Object.assign({},O,{ref:t,className:R,style:P}),q,z,T&&o.createElement(j,{key:"preset",prefixCls:D}),N&&o.createElement(E,{key:"status",prefixCls:D}));return M(U?o.createElement(u.Z,{component:"Tag"},B):B)});S.CheckableTag=k;var O=S},61827:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var o=n(29282),r=function(e){if((0,o.Z)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some(function(e){return e in n.style})}return!1},l=function(e,t){if(!r(e))return!1;var n=document.createElement("div"),o=n.style[e];return n.style[e]=t,n.style[e]!==o};function a(e,t){return Array.isArray(e)||void 0===t?r(e):l(e,t)}},89454:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var o=n(57437),r=n(2265),l=n(50413),a=n(9957),c=n(99368),i=n(46682),s=n(3650),u=n(77733),d=n(95381),m=n(25325),p=n(65783);let h=[{key:"title",title:"Announcement title",dataIndex:"title",width:"40%"},{key:"created_on",title:"Date",dataIndex:"created_on"},{key:"created_by",title:"Created by",dataIndex:"created_by"},{key:"updated_by",title:"Updated by",dataIndex:"updated_by"},{key:"visibility",title:"Visibility",dataIndex:"visibility",filters:[{text:"Invisibile",value:!1},{text:"Visible",value:!0}]},{key:"actions",title:"Actions"}],y=[{key:"edit_announcement",label:"Edit Announcement"},{key:"hide_announcement",label:"Hide Announcement"},{key:"unhide_announcement",label:"Unhide Announcement"}];var f=n(97361),g=n(57834),b=n(56115),v=n(73454),x=n(77738),C=n(91518),k=n(1071),A=n(44785),w=n(49714),j=e=>{let{visible:t,onClose:n}=e,[r]=v.Z.useForm(),l=async()=>{try{var e;let t;let o=await r.validateFields(),l=A.Z.get("token");if(l)try{t=(0,w.o)(l)}catch(e){console.error(e)}let a=null!==(e=null==t?void 0:t.user_id)&&void 0!==e?e:"UndefinedAdmin",c={...o,created_by:a,updated_by:a};try{await f.Z.createAnnouncement(c)}catch(e){throw console.error(e),e}r.resetFields(),n()}catch(e){console.log("Validation Failed:",e)}},a=async()=>{r.resetFields(),n()};return(0,o.jsx)(x.Z,{title:(0,o.jsx)("h3",{style:{textAlign:"center"},children:"Add Announcement"}),open:t,onCancel:a,onOk:l,width:1e3,footer:[(0,o.jsx)(i.ZP,{onClick:a,children:"Cancel"},"cancel"),(0,o.jsx)(i.ZP,{type:"primary",onClick:l,children:"Submit"},"submit")],children:(0,o.jsxs)(v.Z,{form:r,layout:"vertical",children:[(0,o.jsx)(v.Z.Item,{name:"title",label:"Announcement title",rules:[{required:!0,message:"Please enter the announcement title"}],children:(0,o.jsx)(m.default,{placeholder:"Announcement title"})}),(0,o.jsx)(v.Z.Item,{name:"description",label:"Announcement description",rules:[{required:!0,message:"Please enter the announcement description"}],children:(0,o.jsx)(m.default.TextArea,{autoSize:{minRows:4,maxRows:8},placeholder:"Announcement description"})}),(0,o.jsx)(v.Z.Item,{name:"file_uploaded",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:(0,o.jsx)(C.Z,{name:"file",accept:".jpg,.jpeg,.png",beforeUpload:()=>!1,listType:"picture",maxCount:3,multiple:!0,children:(0,o.jsx)(i.ZP,{icon:(0,o.jsx)(k.Z,{}),children:"Upload Image (Max: 3)"})})})]})})},_=e=>{let{visible:t,onClose:n,data:l}=e,[a]=v.Z.useForm(),[c,s]=(0,r.useState)({...l});(0,r.useEffect)(()=>{s({...l}),a.setFieldsValue({...l})},[l,a]);let u=async()=>{try{var e;let t;let o=await a.validateFields(),r=A.Z.get("token");if(r)try{t=(0,w.o)(r)}catch(e){console.error(e)}let l=null!==(e=null==t?void 0:t.user_id)&&void 0!==e?e:"UndefinedAdmin",i={...o,updated_by:l};try{await f.Z.updateAnnouncement(c._id,i)}catch(e){throw console.error(e),e}a.resetFields(),n()}catch(e){console.log("Validation Failed:",e)}},d=async()=>{a.resetFields(),n()};return(0,o.jsx)(x.Z,{title:(0,o.jsx)("h3",{style:{textAlign:"center"},children:"Edit Announcement"}),open:t,onCancel:d,onOk:u,width:1e3,footer:[(0,o.jsx)(i.ZP,{onClick:d,children:"Cancel"},"cancel"),(0,o.jsx)(i.ZP,{type:"primary",onClick:u,children:"Save"},"submit")],children:(0,o.jsxs)(v.Z,{form:a,layout:"vertical",children:[(0,o.jsx)(v.Z.Item,{name:"title",label:"Announcement title",rules:[{required:!0,message:"Please enter the announcement title"}],children:(0,o.jsx)(m.default,{placeholder:"Announcement title"})}),(0,o.jsx)(v.Z.Item,{name:"description",label:"Announcement description",rules:[{required:!0,message:"Please enter the announcement description"}],children:(0,o.jsx)(m.default.TextArea,{autoSize:{minRows:4,maxRows:8},placeholder:"Announcement description"})}),(0,o.jsx)(v.Z.Item,{name:"file_uploaded",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:(0,o.jsx)(C.Z,{name:"file",accept:".jpg,.jpeg,.png",beforeUpload:()=>!1,listType:"picture",maxCount:3,multiple:!0,children:(0,o.jsx)(i.ZP,{icon:(0,o.jsx)(k.Z,{}),children:"Upload Image (Max: 3)"})})})]})})},E=n(99765),Z=n(16463),S=()=>{let[e,t]=(0,r.useState)([]),[n,v]=(0,r.useState)([]),[x,C]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!0),[O,T]=(0,r.useState)([null,null]),[N,I]=(0,r.useState)(null),[P,D]=(0,r.useState)(""),{RangePicker:M}=a.default,F=(0,Z.useRouter)(),L=async()=>{try{let e=await f.Z.getAllAnnouncements();t(e),v(e)}catch(e){throw console.error(e),e}finally{S(!1)}};(0,r.useEffect)(()=>{L()},[F]);let R=(e,t)=>{"edit_announcement"===e?(I(t),A(!0)):"hide_announcement"===e?B(t._id,!1):"unhide_announcement"===e&&B(t._id,!0)},H=e=>{z(e,O)},z=(t,n)=>{let o=RegExp(t,"i"),[r,l]=n||[null,null],a=r?new Date(r).setHours(0,0,0,0):null,c=l?new Date(l).setHours(0,0,0,0):null;v(e.filter(e=>{let t=o.test(e.title),n=new Date(e.created_on).setHours(0,0,0,0);return t&&(!a||!c||n>=r&&n<=l)}))},U=e=>y.map(t=>e.visibility&&"unhide_announcement"===t.key||!e.visibility&&"hide_announcement"===t.key?null:{key:t.key,label:(0,o.jsx)("div",{onClick:()=>R(t.key,e),children:t.label})}).filter(e=>null!==e),V=e=>(0,o.jsx)(c.Z,{menu:{items:U(e)},children:(0,o.jsx)(i.ZP,{children:"Actions"})}),q=e=>e?(0,o.jsx)(s.Z,{color:"green",bordered:!1,className:"px-3 py-0.5 rounded-xl",children:"Visible"}):(0,o.jsx)(s.Z,{color:"red",bordered:!1,className:"px-3 py-0.5 rounded-xl",children:"Invisible"}),B=async(e,t)=>{try{await f.Z.updateAnnouncementVisibility(e,t)}catch(e){throw console.error(e),e}L()},Y=h.map(e=>{switch(e.key){case"actions":return{...e,render:(e,t)=>V(t)};case"created_on":return{...e,render:(t,n)=>E.I.formatDate(n[e.key]),sorter:(t,n)=>new Date(t[e.key]).getTime()-new Date(n[e.key]).getTime()};case"visibility":return{...e,render:e=>q(e),onFilter:(e,t)=>t.visibility===e};default:return{...e,sorter:(t,n)=>(t[e.key]||"").toString().localeCompare((n[e.key]||"").toString())}}});return(0,o.jsxs)(l.default,{title:"Announcement Management",children:[(0,o.jsx)(j,{visible:x,onClose:()=>{C(!1),L()}}),(0,o.jsx)(_,{visible:k,onClose:()=>{A(!1),I(null),L()},data:N}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(u.Z,{style:{justifyContent:"space-between",marginBottom:16},children:[(0,o.jsxs)(d.Z,{style:{display:"flex",gap:"8px"},span:16,children:[(0,o.jsx)(m.default,{placeholder:"Search Announcement",onChange:e=>H(e.target.value?[e.target.value]:[]),prefix:(0,o.jsx)(g.Z,{}),size:"large",style:{width:"60%"}}),(0,o.jsx)(M,{onChange:e=>{T(e),z(P,e)},style:{width:"25%"}})]}),(0,o.jsx)(i.ZP,{type:"primary",icon:(0,o.jsx)(b.Z,{}),iconPosition:"start",onClick:()=>{C(!0)},children:"Add Announcement"})]}),(0,o.jsx)(p.Z,{columns:Y,dataSource:n.map(e=>({...e,key:e._id})),pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:[10,20,50,100]},showSorterTooltip:!1})]})]})}},97361:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(91413),r=n(86863);n(37221);class l{static async createAnnouncement(e){try{await r.O.post(o.P.CREATE_ANNOUNCEMENT,e)}catch(e){throw console.error(e),e}}}l.getAllAnnouncements=async()=>{try{let e=await r.O.get(o.P.FIND_ALL_ANNOUNCEMENT);return e.sort((e,t)=>new Date(t.created_on).getTime()-new Date(e.created_on).getTime()),e}catch(e){throw console.error(e),e}},l.getVisibleAnnouncements=async()=>{try{let e=await r.O.get(o.P.FIND_VISIBLE_ANNOUNCEMENT);return e.sort((e,t)=>new Date(t.created_on).getTime()-new Date(e.created_on).getTime()),e}catch(e){throw console.error(e),e}},l.updateAnnouncement=async(e,t)=>{try{await r.O.patch(o.P.EDIT_ANNOUNCEMENT,t,{id:e})}catch(e){throw console.error(e),e}},l.updateAnnouncementVisibility=async(e,t)=>{try{await r.O.patch(o.P.EDIT_ANNOUNCEMENT,{visibility:t},{id:e})}catch(e){throw console.error(e),e}}},99765:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var o=n(62737),r=n.n(o);class l{static formatDate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.DEFAULT_DATE_FORMAT;return e?r()(e).format(t):""}}l.DEFAULT_DATE_FORMAT="YYYY-MM-DD",l.DEFAULT_DATE_TIME_FORMAT="YYYY-MM-DD HH:mm:ss",l.CATEGORY_DATE_FORMAT="DD MMM YYYY"},37221:function(){}},function(e){e.O(0,[3276,9665,3419,3454,5325,7460,7382,7373,7738,4052,6487,5783,6326,1518,806,9957,413,2971,7023,1744],function(){return e(e.s=28707)}),_N_E=e.O()}]);