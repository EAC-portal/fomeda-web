(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3970],{71592:function(e,a,t){Promise.resolve().then(t.bind(t,34005))},9707:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var s=t(22988),i=t(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},n=t(25636),r=i.forwardRef(function(e,a){return i.createElement(n.Z,(0,s.Z)({},e,{ref:a,icon:l}))})},71480:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var s=t(22988),i=t(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},n=t(25636),r=i.forwardRef(function(e,a){return i.createElement(n.Z,(0,s.Z)({},e,{ref:a,icon:l}))})},37310:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var s=t(22988),i=t(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},n=t(25636),r=i.forwardRef(function(e,a){return i.createElement(n.Z,(0,s.Z)({},e,{ref:a,icon:l}))})},56115:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var s=t(22988),i=t(2265),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},n=t(25636),r=i.forwardRef(function(e,a){return i.createElement(n.Z,(0,s.Z)({},e,{ref:a,icon:l}))})},34005:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return j}});var s=t(57437),i=t(16463),l=t(50413),n=t(2265),r=t(73454),c=t(77738),u=t(44052),d=t(25325),o=t(17460),f=t(97382),p=t(77733),m=t(46682),h=t(55166),_=t(33778),b=t(88372),v=t(71480),x=t(52875),Z=t(82649),g=t(5951),I=e=>{let{specId:a}=e,[t]=r.Z.useForm(),[i,l]=(0,n.useState)({}),[I,j]=(0,n.useState)({}),[E,S]=(0,n.useState)(""),[y,C]=(0,n.useState)(!1),[P,F]=(0,n.useState)([]),[N,A]=(0,n.useState)(!1),w=!a.includes(h.rJ.SUBSPECIFICATION_PREFIX),R=h.aL[E],B=h.pF.map(e=>({value:e.key,label:e.label}));(0,n.useEffect)(()=>{let e={[h.rJ.GENERAL_SUBSPECIFICATION_PREFIX]:b.Z.findGeneralSubspecificationById,[h.rJ.BASE_SUBSPECIFICATION_PREFIX]:b.Z.findBaseSubspecificationById,[h.rJ.SUBSPECIFICATION_PREFIX]:b.Z.findSubcategorySubspecificationById,[h.rJ.GENERAL_SPECIFICATION_PREFIX]:b.Z.findGeneralSpecificationById,[h.rJ.BASE_SPECIFICATION_PREFIX]:b.Z.findBaseSpecificationById,[h.rJ.SPECIFICATION_PREFIX]:b.Z.findSubcategorySpecificationById},s=async a=>{let t=Object.keys(e).find(e=>a.includes(e));if(t){let s=await e[t](a);s&&F([{value:s._id,label:s.subcat_spec_name}])}};(async()=>{let i=Object.keys(e).find(e=>a.includes(e));if(i){var n;A(!0);let r=await e[i](a);l(r),j(r),S(null!==(n=r.cat_type)&&void 0!==n?n:h.rJ.SPECIFICATION),t.setFieldsValue(r),w||await s(r.subcat_spec_id)}})().then(()=>A(!1))},[t,w,a]);let q=async()=>{try{var e;await t.validateFields();let a=t.getFieldsValue();c.Z.confirm({title:(0,s.jsx)("h3",{children:"Confirmation"}),content:(0,s.jsx)(x.Z,{action:"Edit",record:{cat_type:E,subcat_spec_name:null!==(e=a.subcat_spec_name)&&void 0!==e?e:P[0].label,subcat_subspec_name:a.subcat_subspec_name}}),className:"confirmation-modal",centered:!0,width:"35%",okText:"Confirm",onOk:()=>O(a)})}catch(e){throw g.Z.error("Please Filled in the required field."),e}},T={[h.rJ.GENERAL_SUBSPECIFICATION_PREFIX]:b.Z.updateGeneralSubspecification,[h.rJ.BASE_SUBSPECIFICATION_PREFIX]:b.Z.updateBaseSubspecification,[h.rJ.SUBSPECIFICATION_PREFIX]:b.Z.updateSubcategorySubspecification,[h.rJ.GENERAL_SPECIFICATION_PREFIX]:b.Z.updateGeneralSpecification,[h.rJ.BASE_SPECIFICATION_PREFIX]:b.Z.updateBaseSpecification,[h.rJ.SPECIFICATION_PREFIX]:b.Z.updateSubcategorySpecification},O=async e=>{let t=Object.keys(T).find(e=>a.includes(e));if(t){var s,i;try{await T[t](a,e),Z.Z.success("Update ".concat(R),"".concat(null!==(s=e.subcat_subspec_name)&&void 0!==s?s:e.subcat_spec_name," is updated successfully.")),C(!1)}catch(a){throw Z.Z.error("Update ".concat(R),"".concat(null!==(i=e.subcat_subspec_name)&&void 0!==i?i:e.subcat_spec_name," failed to update.")),a}}},k=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,s.jsxs)(u.ZP.Group,{onChange:e,defaultValue:a,disabled:t,children:[(0,s.jsx)(u.ZP,{value:!0,children:"Yes"}),(0,s.jsx)(u.ZP,{value:!1,children:"No"})]})},X=(e,a)=>{let t,i,{label:l,type:n,name:c,rules:u,value:f,isDisabled:p,options:m}=e;if("input"===n?t=(0,s.jsx)(d.default,{name:c,onChange:a,disabled:p}):"select"===n?t=(0,s.jsx)(o.default,{defaultValue:f,onChange:a,options:m,disabled:p}):"radio"===n&&(t=k(a,f,p)),"radio"===n)i=f?"Yes":"No";else if("select"===n){var h;i=null===(h=m.filter(e=>e.value===f)[0])||void 0===h?void 0:h.label}else i=f;return(0,s.jsx)(r.Z.Item,{label:(0,s.jsx)("h5",{children:l}),labelCol:{span:6},labelAlign:"left",name:c,rules:y?u:[],children:y?t:(0,s.jsx)("div",{children:i})})};return N?(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(f.Z,{})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.Z,{justify:"end",children:(0,s.jsxs)(m.ZP,{icon:(0,s.jsx)(v.Z,{}),disabled:y,type:"primary",onClick:()=>C(!y),children:["Edit ",R]})}),(0,s.jsxs)(r.Z,{form:t,name:"specification_form",className:"mx-8 max-w-3xl",initialValues:i,children:[E===h.rJ.SPECIFICATION?(0,s.jsx)(r.Z.Item,{label:(0,s.jsx)("h5",{children:"Specification Type:"}),labelCol:{span:6},labelAlign:"left",children:y?(0,s.jsxs)(u.ZP.Group,{disabled:!0,value:w,children:[(0,s.jsx)(u.ZP,{value:!0,children:"Specification"}),(0,s.jsx)(u.ZP,{value:!1,children:"Subspecification"})]}):(0,s.jsx)("div",{children:w?"Specification":"Subspecification"})}):(0,s.jsx)(s.Fragment,{}),w?X({label:"".concat(R," Name"),type:"input",name:"subcat_spec_name",rules:[{required:!0,message:"".concat(R," Name is required")}],value:i.subcat_spec_name},e=>l(a=>({...a,subcat_spec_name:e.target.value}))):(0,s.jsxs)(s.Fragment,{children:[X({label:"".concat(R," Name"),type:"select",name:"subcat_spec_id",rules:[{required:!0,message:"".concat(R," Name is required")}],value:i.subcat_spec_id,isDisabled:!0,options:P},(e,a)=>l(t=>({...t,subcat_spec_id:e,subcat_spec_name:(null==a?void 0:a.label)||t.subcat_spec_name}))),X({label:"Subspecification Name",type:"input",name:"subcat_subspec_name",rules:[{required:!0,message:"Subspecification Name is required"}],value:i.subcat_subspec_name},e=>l(a=>({...a,subcat_subspec_name:e.target.value})))]}),X({label:"Allow Input",type:"radio",name:"allow_input",value:i.allow_input,isDisabled:!0},e=>l(a=>({...a,allow_input:e.target.value}))),i.allow_input&&(0,s.jsxs)(s.Fragment,{children:[X({label:"Required Field",type:"radio",name:"is_required",value:i.is_required,isDisabled:!0},e=>l(a=>({...a,is_required:e.target.value}))),X({label:"Prefix",type:"input",name:"prefix",value:""!==i.prefix?i.prefix:"-"},e=>l(a=>({...a,prefix:e.target.value}))),X({label:"Suffix",type:"input",name:"suffix",value:""!==i.suffix?i.suffix:"-"},e=>l(a=>({...a,suffix:e.target.value}))),X({label:"Field Type",type:"select",name:"field_type",value:i.field_type,options:B},e=>l(a=>({...a,field_type:e}))),X({label:"Contributed To Score",type:"radio",name:"is_score_contributed",value:i.is_score_contributed,isDisabled:!1},e=>l(a=>({...a,is_score_contributed:e.target.value}))),i.is_score_contributed?(0,s.jsx)(r.Z.Item,{label:(0,s.jsx)("h5",{children:"Rating Score"}),labelCol:{span:6},labelAlign:"left",name:"rating_score",children:(0,s.jsx)(_.Z,{form:t,type:i.field_type,isEdit:y,originalData:I})}):(0,s.jsx)(s.Fragment,{})]}),y&&(0,s.jsxs)(p.Z,{justify:"end",className:"mb-8",children:[(0,s.jsx)(m.ZP,{type:"default",className:"m-2",size:"large",onClick:()=>{l(I),C(!1),t.setFieldsValue(I)},children:"Cancel"}),(0,s.jsxs)(m.ZP,{type:"primary",className:"m-2",size:"large",onClick:q,children:["Save ",R]})]})]})]})},j=()=>{let e=(0,i.useSearchParams)(),a=e.get("type"),t=e.get("id"),n=h.aL[a];return(0,s.jsx)(l.default,{title:"".concat(n," Details"),isRoot:!1,children:(0,s.jsx)(I,{specId:t})})}},33768:function(e,a,t){"use strict";var s=t(57437),i=t(25325),l=t(6762);a.Z=e=>{let{value:a,type:t="alphanumeric",onChange:n,...r}=e;return(0,s.jsx)(i.default,{value:a,onChange:e=>{let a;let s=e.target.value;if(""===s)a=!0;else switch(t){case"numeric":a=l.K.REGEX_NUMERIC.test(s);break;case"alphabet":a=l.K.REGEX_ALPHABET.test(s);break;case"alphanumeric":a=l.K.REGEX_ALPHANUMERIC.test(s);break;default:a=!0}n&&a&&n(s)},...r})}},33778:function(e,a,t){"use strict";var s=t(57437),i=t(2265),l=t(73454),n=t(77733),r=t(95381),c=t(17460),u=t(46682),d=t(9707),o=t(37310),f=t(56115),p=t(55166),m=t(50040),h=t(33768);a.Z=e=>{let{form:a,type:t,isEdit:_=!0,originalData:b=null}=e,v=(0,i.useMemo)(()=>p.xQ.filter(e=>e.type.includes(t)).map(e=>({label:e.label,value:e.key})),[t]);return(0,i.useEffect)(()=>{if(!b||b&&b.field_type!==t){let e=Array.from({length:3},()=>{var e;return{action:(null===(e=v[0])||void 0===e?void 0:e.value)||"",value:"",score:0}});a.setFieldsValue({rating_score:e})}else a.setFieldsValue({rating_score:b.rating_score})},[t,a,v,b]),(0,s.jsx)(l.Z.List,{name:"rating_score",children:(e,i)=>{let{add:b,remove:x}=i;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.Z,{className:"my-2",children:[(0,s.jsx)(r.Z,{span:6,children:(0,s.jsx)("h5",{children:"Action"})}),(0,s.jsx)(r.Z,{span:12,children:(0,s.jsx)("h5",{children:"Value"})}),(0,s.jsx)(r.Z,{span:4,children:(0,s.jsx)("h5",{children:"Score"})}),(0,s.jsx)(r.Z,{span:2})]}),e.map((i,f)=>{var b,Z;let g=a.getFieldValue(["rating_score",f,"action"])===p.rJ.HAVE_VALUE;return(0,s.jsxs)(n.Z,{gutter:16,align:"middle",className:"mt-4 w-full",children:[(0,s.jsx)(r.Z,{span:6,children:(0,s.jsx)(l.Z.Item,{className:"m-0",name:[f,"action"],children:_?(0,s.jsx)(c.default,{options:v,defaultValue:(null===(b=v[0])||void 0===b?void 0:b.value)||""}):(0,s.jsx)("span",{children:m.x.formatTitleCase(null===(Z=v[0])||void 0===Z?void 0:Z.value,"_")})})}),(0,s.jsx)(r.Z,{span:12,children:(0,s.jsx)(l.Z.Item,{className:"m-0",name:[f,"value"],rules:[{required:_&&!g,message:"Value is required"}],children:_?(0,s.jsx)(h.Z,{type:t.toLowerCase(),disabled:g}):(0,s.jsx)("span",{children:a.getFieldValue("rating_score")[f].value})})}),(0,s.jsx)(r.Z,{span:4,children:(0,s.jsx)(l.Z.Item,{className:"m-0",name:[f,"score"],rules:[{required:_,message:"Score is required"}],children:_?(0,s.jsx)(h.Z,{type:"numeric"}):(0,s.jsx)("span",{children:a.getFieldValue("rating_score")[f].score})})}),_&&(0,s.jsx)(r.Z,{span:2,children:(0,s.jsx)(u.ZP,{icon:(0,s.jsx)(d.Z,{}),onClick:()=>x(i.name),disabled:e.length<=1})}),e.length<=1&&_&&(0,s.jsxs)("div",{className:"text-yellow-500 italic pl-2",children:[(0,s.jsx)(o.Z,{})," At least 1 row is required"]})]},i.key)}),_&&(0,s.jsx)(u.ZP,{type:"primary",onClick:()=>{var e;return b({action:(null===(e=v[0])||void 0===e?void 0:e.value)||"",value:"",score:0})},icon:(0,s.jsx)(f.Z,{}),className:"mt-4",children:"Add Row"})]})}})}},6762:function(e,a,t){"use strict";t.d(a,{K:function(){return s}});class s{}s.REGEX_ALPHABET=/^[a-zA-Z\s\-\_]+$/,s.REGEX_NUMERIC=/^\d*\.?\d*$/,s.REGEX_ALPHANUMERIC=/^[a-zA-Z0-9\s\-\_\@\#\!\$]+$/},5951:function(e,a,t){"use strict";var s=t(71768);class i{static showMessage(e,a){switch(e){case"success":return s.ZP.success(a);case"error":return s.ZP.error(a);case"warning":return s.ZP.warning(a);default:return s.ZP.info(a)}}static success(e){return this.showMessage("success",e)}static error(e){return this.showMessage("error",e)}static warning(e){return this.showMessage("warning",e)}static info(e){return this.showMessage("info",e)}}a.Z=i}},function(e){e.O(0,[3276,9665,3419,3454,5325,7460,7382,7738,4052,509,413,5539,2971,7023,1744],function(){return e(e.s=71592)}),_N_E=e.O()}]);