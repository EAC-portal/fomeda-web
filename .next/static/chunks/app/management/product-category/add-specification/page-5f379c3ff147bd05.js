(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2948],{4025:function(e,t,a){Promise.resolve().then(a.bind(a,21989))},9707:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var i=a(22988),n=a(2265),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},r=a(25636),c=n.forwardRef(function(e,t){return n.createElement(r.Z,(0,i.Z)({},e,{ref:t,icon:s}))})},37310:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var i=a(22988),n=a(2265),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},r=a(25636),c=n.forwardRef(function(e,t){return n.createElement(r.Z,(0,i.Z)({},e,{ref:t,icon:s}))})},56115:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var i=a(22988),n=a(2265),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},r=a(25636),c=n.forwardRef(function(e,t){return n.createElement(r.Z,(0,i.Z)({},e,{ref:t,icon:s}))})},21989:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var i=a(57437),n=a(16463),s=a(50413),r=a(2265),c=a(73454),l=a(77738),d=a(44052),o=a(25325),u=a(17460),_=a(77733),p=a(46682),f=a(55166),m=a(33778),h=a(88372),x=a(82649),y=a(52875),b=a(5951),g=a(34682);let v={cat_id:"",subcat_id:"",subcat_spec_name:"",cat_type:"",allow_input:!0,is_required:!1,prefix:"",suffix:"",field_type:g.Py.ALPHANUMERIC,is_score_contributed:!1,rating_score:[]},w={subcat_spec_id:"",subcat_spec_name:"",subcat_subspec_name:"",allow_input:!0,is_required:!1,prefix:"",suffix:"",field_type:g.Py.ALPHANUMERIC,is_score_contributed:!1,rating_score:[]};var I=e=>{var t;let{specificationType:a,catId:s=""}=e,g=(0,n.useRouter)(),I=f.aL[a],[Z]=c.Z.useForm(),[C,E]=(0,r.useState)(v),[A,j]=(0,r.useState)(w),[k,N]=(0,r.useState)(!0),[P,S]=(0,r.useState)(!0),[R,T]=(0,r.useState)([]),[q,F]=(0,r.useState)(""),[M,O]=(0,r.useState)([]),V=f.pF.map(e=>({value:e.key,label:e.label})),H=(0,r.useCallback)(()=>R.filter(e=>e.cat_type===f.rJ.SPECIFICATION&&void 0===e.is_origin).map(e=>({value:e._id,label:e.subcat_spec_name})),[R]);(0,r.useEffect)(()=>{let e=async()=>{try{let e;e=null===s||""===s||void 0===s?await h.Z.getAllGeneralSpecifications():s.includes(f.rJ.SUBCATEGORY_PREFIX)?await h.Z.findSubcategorySpecificationByCatId(s):await h.Z.findCategoryBaseSpecificationByCatId(s),T(e)}catch(e){console.error(e)}finally{S(!1)}};a===f.rJ.SPECIFICATION&&e().then()},[s,a]),(0,r.useEffect)(()=>{let e=H();O(e),e.length>0&&(F(e[0].value),j(t=>({...t,subcat_spec_id:e[0].value,subcat_spec_name:e[0].label})))},[H]);let G=(e,t)=>null===t||""===t||void 0===t?e?h.Z.createGeneralSpecification:h.Z.createGeneralSubspecification:t.includes(f.rJ.SUBCATEGORY_PREFIX)?e?h.Z.createSubcategorySpecification:h.Z.createSubcategorySubspecification:e?h.Z.createCategoryBaseSpecification:h.Z.createCategoryBaseSubspecification,L=async()=>{try{await Z.validateFields();let e=k?C:A,t={allow_input:C.allow_input,is_required:C.is_required,prefix:C.prefix,suffix:C.suffix,field_type:C.field_type,is_score_contributed:C.is_score_contributed,rating_score:Z.getFieldsValue().rating_score,cat_type:a},n={...e,...t};k&&(n={...n,cat_id:s,subcat_id:s}),l.Z.confirm({title:(0,i.jsx)("h3",{children:"Confirmation"}),content:(0,i.jsx)(y.Z,{action:"Add",record:n}),className:"confirmation-modal",centered:!0,width:"35%",okText:"Confirm",onOk:()=>B(n)})}catch(e){throw b.Z.error("Please Filled in the required field."),e}},B=async e=>{var t,a;let i=G(k,s);try{await i(e),x.Z.success("Add ".concat(I),"".concat(null!==(t=e.subcat_subspec_name)&&void 0!==t?t:e.subcat_spec_name," is added successfully.")),g.back()}catch(t){throw x.Z.error("Add ".concat(I),"".concat(null!==(a=e.subcat_subspec_name)&&void 0!==a?a:e.subcat_spec_name," failed to add.")),t}},U=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,i.jsxs)(d.ZP.Group,{onChange:e,defaultValue:t,disabled:a,children:[(0,i.jsx)(d.ZP,{value:!0,children:"Yes"}),(0,i.jsx)(d.ZP,{value:!1,children:"No"})]})},z=function(e,t,a,n,s,r){let l,d=arguments.length>6&&void 0!==arguments[6]&&arguments[6],_=arguments.length>7?arguments[7]:void 0;return"input"===a?l=(0,i.jsx)(o.default,{name:n,onChange:t,disabled:d}):"select"===a?l=(0,i.jsx)(u.default,{defaultValue:r,onChange:t,options:_,disabled:d}):"radio"===a&&(l=U(t,r,d)),(0,i.jsx)(c.Z.Item,{label:(0,i.jsx)("h5",{children:e}),labelCol:{span:6},labelAlign:"left",name:n,rules:s,initialValue:r,children:l})};return P&&a===f.rJ.SPECIFICATION?(0,i.jsx)("div",{children:"Loading..."}):(0,i.jsxs)(c.Z,{form:Z,name:"".concat(I,"_form"),className:"mx-8 max-w-3xl",children:[a===f.rJ.SPECIFICATION?(0,i.jsx)(c.Z.Item,{label:(0,i.jsx)("h5",{children:"Specification Type"}),labelCol:{span:6},labelAlign:"left",children:(0,i.jsxs)(d.ZP.Group,{onChange:e=>{let t=e.target.value;N(t),t?C.subcat_spec_name=A.subcat_subspec_name:A.subcat_subspec_name=C.subcat_spec_name},value:k,children:[(0,i.jsx)(d.ZP,{value:!0,children:"Specification"}),(0,i.jsx)(d.ZP,{value:!1,children:"Subspecification"})]})}):(0,i.jsx)(i.Fragment,{}),k?z("".concat(I," Name"),e=>E(t=>({...t,subcat_spec_name:e.target.value})),"input","subcat_spec_name",[{required:!0,message:"".concat(I," Name is required")}]):(0,i.jsxs)(i.Fragment,{children:[z("".concat(I," Name"),(e,t)=>j(a=>({...a,subcat_spec_id:e,subcat_spec_name:(null==t?void 0:t.label)||a.subcat_spec_name})),"select","subcat_spec_id",[{required:!0,message:"".concat(I," Name is required")}],q,!1,M),z("Subspecification Name",e=>j(t=>({...t,subcat_subspec_name:e.target.value})),"input","subcat_subspec_name",[{required:!0,message:"Subspecification Name is required"}])]}),z("Allow Input",e=>E(t=>({...t,allow_input:e.target.value})),"radio","allow_input",[],C.allow_input),C.allow_input&&z("Required Field",e=>E(t=>({...t,is_required:e.target.value})),"radio","is_required",[],C.is_required),C.allow_input&&z("Prefix",e=>E(t=>({...t,prefix:e.target.value})),"input","prefix"),C.allow_input&&z("Suffix",e=>E(t=>({...t,suffix:e.target.value})),"input","suffix"),C.allow_input&&z("Field Type",e=>E(t=>({...t,field_type:e})),"select","field_type",[],null===(t=V[0])||void 0===t?void 0:t.value,!1,V),C.allow_input&&z("Contributed To Score",e=>E(t=>({...t,is_score_contributed:e.target.value})),"radio","is_score_contributed",[],C.is_score_contributed),C.is_score_contributed&&C.allow_input?(0,i.jsx)(c.Z.Item,{label:(0,i.jsx)("h5",{children:"Rating Score"}),labelCol:{span:6},labelAlign:"left",name:"rating_score",children:(0,i.jsx)(m.Z,{form:Z,type:C.field_type})}):(0,i.jsx)(i.Fragment,{}),(0,i.jsxs)(_.Z,{justify:"end",className:"mb-8",children:[(0,i.jsx)(p.ZP,{type:"default",className:"m-2",size:"large",onClick:()=>g.back(),children:"Cancel"}),(0,i.jsxs)(p.ZP,{type:"primary",className:"m-2",size:"large",onClick:L,children:["Add ",I]})]})]})},Z=()=>{let e=(0,n.useSearchParams)(),t=e.get("type"),a=e.get("id"),r=f.aL[t];return(0,i.jsx)(s.default,{title:"Add ".concat(r),isRoot:!1,children:(0,i.jsx)(I,{specificationType:t,catId:a})})}},33768:function(e,t,a){"use strict";var i=a(57437),n=a(25325),s=a(6762);t.Z=e=>{let{value:t,type:a="alphanumeric",onChange:r,...c}=e;return(0,i.jsx)(n.default,{value:t,onChange:e=>{let t;let i=e.target.value;if(""===i)t=!0;else switch(a){case"numeric":t=s.K.REGEX_NUMERIC.test(i);break;case"alphabet":t=s.K.REGEX_ALPHABET.test(i);break;case"alphanumeric":t=s.K.REGEX_ALPHANUMERIC.test(i);break;default:t=!0}r&&t&&r(i)},...c})}},33778:function(e,t,a){"use strict";var i=a(57437),n=a(2265),s=a(73454),r=a(77733),c=a(95381),l=a(17460),d=a(46682),o=a(9707),u=a(37310),_=a(56115),p=a(55166),f=a(50040),m=a(33768);t.Z=e=>{let{form:t,type:a,isEdit:h=!0,originalData:x=null}=e,y=(0,n.useMemo)(()=>p.xQ.filter(e=>e.type.includes(a)).map(e=>({label:e.label,value:e.key})),[a]);return(0,n.useEffect)(()=>{if(!x||x&&x.field_type!==a){let e=Array.from({length:3},()=>{var e;return{action:(null===(e=y[0])||void 0===e?void 0:e.value)||"",value:"",score:0}});t.setFieldsValue({rating_score:e})}else t.setFieldsValue({rating_score:x.rating_score})},[a,t,y,x]),(0,i.jsx)(s.Z.List,{name:"rating_score",children:(e,n)=>{let{add:x,remove:b}=n;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.Z,{className:"my-2",children:[(0,i.jsx)(c.Z,{span:6,children:(0,i.jsx)("h5",{children:"Action"})}),(0,i.jsx)(c.Z,{span:12,children:(0,i.jsx)("h5",{children:"Value"})}),(0,i.jsx)(c.Z,{span:4,children:(0,i.jsx)("h5",{children:"Score"})}),(0,i.jsx)(c.Z,{span:2})]}),e.map((n,_)=>{var x,g;let v=t.getFieldValue(["rating_score",_,"action"])===p.rJ.HAVE_VALUE;return(0,i.jsxs)(r.Z,{gutter:16,align:"middle",className:"mt-4 w-full",children:[(0,i.jsx)(c.Z,{span:6,children:(0,i.jsx)(s.Z.Item,{className:"m-0",name:[_,"action"],children:h?(0,i.jsx)(l.default,{options:y,defaultValue:(null===(x=y[0])||void 0===x?void 0:x.value)||""}):(0,i.jsx)("span",{children:f.x.formatTitleCase(null===(g=y[0])||void 0===g?void 0:g.value,"_")})})}),(0,i.jsx)(c.Z,{span:12,children:(0,i.jsx)(s.Z.Item,{className:"m-0",name:[_,"value"],rules:[{required:h&&!v,message:"Value is required"}],children:h?(0,i.jsx)(m.Z,{type:a.toLowerCase(),disabled:v}):(0,i.jsx)("span",{children:t.getFieldValue("rating_score")[_].value})})}),(0,i.jsx)(c.Z,{span:4,children:(0,i.jsx)(s.Z.Item,{className:"m-0",name:[_,"score"],rules:[{required:h,message:"Score is required"}],children:h?(0,i.jsx)(m.Z,{type:"numeric"}):(0,i.jsx)("span",{children:t.getFieldValue("rating_score")[_].score})})}),h&&(0,i.jsx)(c.Z,{span:2,children:(0,i.jsx)(d.ZP,{icon:(0,i.jsx)(o.Z,{}),onClick:()=>b(n.name),disabled:e.length<=1})}),e.length<=1&&h&&(0,i.jsxs)("div",{className:"text-yellow-500 italic pl-2",children:[(0,i.jsx)(u.Z,{})," At least 1 row is required"]})]},n.key)}),h&&(0,i.jsx)(d.ZP,{type:"primary",onClick:()=>{var e;return x({action:(null===(e=y[0])||void 0===e?void 0:e.value)||"",value:"",score:0})},icon:(0,i.jsx)(_.Z,{}),className:"mt-4",children:"Add Row"})]})}})}},34682:function(e,t,a){"use strict";a.d(t,{Jp:function(){return l},Py:function(){return i},V_:function(){return n},_C:function(){return r},hU:function(){return s},m:function(){return c}});class i{}i.APPROVED="APPROVED",i.PENDING="PENDING",i.REJECTED="REJECTED",i.REJECT_ACTION="reject",i.APPROVE_ACTION="approve",i.ALPHABET="ALPHABET",i.ALPHANUMERIC="ALPHANUMERIC",i.NUMERIC="NUMERIC";let n=[{key:"pending",label:"Pending",value:"pending"},{key:"history",label:"History",value:"history"}],s=[{key:"product_name",title:"Product Name",dataIndex:"product_name",width:"40%"},{key:"cat_name",title:"Category",dataIndex:"cat_name",width:"10%"},{key:"subcat_name",title:"Subcategory",dataIndex:"subcat_name",width:"10%"},{key:"model_no",title:"Model No",dataIndex:"model_no",width:"10%"},{key:"owner_username",title:"Owner",dataIndex:"owner_username",width:"10%"},{key:"last_updated_on",title:"Submitted on",dataIndex:"last_updated_on",width:"10%"},{key:"action",title:"Action",dataIndex:"action",width:"10%"}],r=[{key:"product_name",title:"Product Name",dataIndex:"product_name",width:"20%"},{key:"cat_name",title:"Category",dataIndex:"cat_name",width:"10%"},{key:"subcat_name",title:"Subcategory",dataIndex:"subcat_name",width:"10%"},{key:"model_no",title:"Model No",dataIndex:"model_no",width:"10%"},{key:"owner_username",title:"Owner",dataIndex:"owner_username",width:"10%"},{key:"reviewed_on",title:"Reviewed on",dataIndex:"reviewed_on",width:"10%"},{key:"admin_username",title:"Reviewed by",dataIndex:"admin_username",width:"10%"},{key:"status",title:"Status",dataIndex:"status",width:"10%"},{key:"action",title:"Action",dataIndex:"action",width:"10%"}],c=[{key:"general_information",title:"General Information",group:"Information",type:"INFORMATION",tableHeader:[{key:"spec_name",title:"Information",dataIndex:"spec_name",width:"40%"},{key:"spec_desc",title:"Value",dataIndex:"spec_desc",width:"40%"},{key:"score",title:"Score",dataIndex:"score",width:"20%"}]},{key:"certification",title:"Certification",group:"Certification",type:"CERTIFICATION",tableHeader:[{key:"spec_name",title:"Certification",dataIndex:"spec_name",width:"40%"},{key:"spec_desc",title:"Value",dataIndex:"spec_desc",width:"40%"},{key:"score",title:"Score",dataIndex:"score",width:"20%"}]},{key:"warranty",title:"Warranty",group:"Warranty",type:"WARRANTY",tableHeader:[{key:"spec_name",title:"Warranty",dataIndex:"spec_name",width:"40%"},{key:"spec_desc",title:"Value",dataIndex:"spec_desc",width:"40%"},{key:"score",title:"Score",dataIndex:"score",width:"20%"}]},{key:"product_specification",title:"Product Specification",group:"Specification",type:"SPECIFICATION",tableHeader:[{key:"spec_name",title:"Specification",dataIndex:"spec_name",width:"40%"},{key:"spec_desc",title:"Value",dataIndex:"spec_desc",width:"40%"},{key:"score",title:"Score",dataIndex:"score",width:"20%"}]}],l=[{key:"general_information",title:"General Information",type:"INFORMATION"},{key:"certification",title:"Certification",type:"CERTIFICATION"},{key:"warranty",title:"Warranty",type:"WARRANTY"},{key:"product_specification",title:"Product Specification",type:"SPECIFICATION"}]},6762:function(e,t,a){"use strict";a.d(t,{K:function(){return i}});class i{}i.REGEX_ALPHABET=/^[a-zA-Z\s\-\_]+$/,i.REGEX_NUMERIC=/^\d*\.?\d*$/,i.REGEX_ALPHANUMERIC=/^[a-zA-Z0-9\s\-\_\@\#\!\$]+$/},5951:function(e,t,a){"use strict";var i=a(71768);class n{static showMessage(e,t){switch(e){case"success":return i.ZP.success(t);case"error":return i.ZP.error(t);case"warning":return i.ZP.warning(t);default:return i.ZP.info(t)}}static success(e){return this.showMessage("success",e)}static error(e){return this.showMessage("error",e)}static warning(e){return this.showMessage("warning",e)}static info(e){return this.showMessage("info",e)}}t.Z=n}},function(e){e.O(0,[3276,9665,3419,3454,5325,7460,7738,4052,509,413,5539,2971,7023,1744],function(){return e(e.s=4025)}),_N_E=e.O()}]);