(()=>{var e={};e.id=3787,e.ids=[3787],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},78677:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),n(61967),n(49864),n(35866);var r=n(23191),o=n(88716),a=n(37922),l=n.n(a),i=n(95231),s={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>i[e]);n.d(t,s);let c=["",{children:["management",{children:["announcement",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,61967)),"C:\\Users\\User\\Desktop\\Project\\fomeda-web\\src\\app\\management\\announcement\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(n.bind(n,49864)),"C:\\Users\\User\\Desktop\\Project\\fomeda-web\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\User\\Desktop\\Project\\fomeda-web\\src\\app\\management\\announcement\\page.tsx"],u="/management/announcement/page",m={require:n,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/management/announcement/page",pathname:"/management/announcement",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},84703:(e,t,n)=>{Promise.resolve().then(n.bind(n,90396))},72380:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(45353),o=n(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};var l=n(74082);let i=o.forwardRef(function(e,t){return o.createElement(l.Z,(0,r.Z)({},e,{ref:t,icon:a}))})},40557:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(45353),o=n(17577);let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var l=n(74082);let i=o.forwardRef(function(e,t){return o.createElement(l.Z,(0,r.Z)({},e,{ref:t,icon:a}))})},38106:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});let r=n(18467).Z},49508:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});let r=e=>({color:e.colorLink,textDecoration:"none",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}})},92379:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var r=n(17577),o=n(48029),a=n.n(o),l=n(56212),i=n(63698),s=n(22221),c=n(97619),d=n(305),u=n(85190),m=n(52306),p=n(41749),h=n(53558),g=n(5926),y=n(29987);let x=e=>{let{paddingXXS:t,lineWidth:n,tagPaddingHorizontal:r,componentCls:o,calc:a}=e,l=a(r).sub(n).equal(),i=a(t).sub(n).equal();return{[o]:Object.assign(Object.assign({},(0,h.Wf)(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:l,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${(0,m.unit)(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:i,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:l}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},f=e=>{let{lineWidth:t,fontSizeIcon:n,calc:r}=e,o=e.fontSizeSM;return(0,g.TS)(e,{tagFontSize:o,tagLineHeight:(0,m.unit)(r(e.lineHeightSM).mul(o).equal()),tagIconSize:r(n).sub(r(t).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},b=e=>({defaultBg:new p.C(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),v=(0,y.I$)("Tag",e=>x(f(e)),b);var C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let w=r.forwardRef((e,t)=>{let{prefixCls:n,style:o,className:l,checked:i,onChange:s,onClick:c}=e,d=C(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:m,tag:p}=r.useContext(u.E_),h=m("tag",n),[g,y,x]=v(h),f=a()(h,`${h}-checkable`,{[`${h}-checkable-checked`]:i},null==p?void 0:p.className,l,y,x);return g(r.createElement("span",Object.assign({},d,{ref:t,style:Object.assign(Object.assign({},o),null==p?void 0:p.style),className:f,onClick:e=>{null==s||s(!i),null==c||c(e)}})))});var k=n(52764);let j=e=>(0,k.Z)(e,(t,n)=>{let{textColor:r,lightBorderColor:o,lightColor:a,darkColor:l}=n;return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:r,background:a,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:l,borderColor:l},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}}),A=(0,y.bk)(["Tag","preset"],e=>j(f(e)),b),_=(e,t,n)=>{let r=function(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}(n);return{[`${e.componentCls}${e.componentCls}-${t}`]:{color:e[`color${n}`],background:e[`color${r}Bg`],borderColor:e[`color${r}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},P=(0,y.bk)(["Tag","status"],e=>{let t=f(e);return[_(t,"success","Success"),_(t,"processing","Info"),_(t,"error","Error"),_(t,"warning","Warning")]},b);var E=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};let Z=r.forwardRef((e,t)=>{let{prefixCls:n,className:o,rootClassName:m,style:p,children:h,icon:g,color:y,onClose:x,bordered:f=!0,visible:b}=e,C=E(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:w,direction:k,tag:j}=r.useContext(u.E_),[_,Z]=r.useState(!0),S=(0,l.Z)(C,["closeIcon","closable"]);r.useEffect(()=>{void 0!==b&&Z(b)},[b]);let T=(0,i.o2)(y),O=(0,i.yT)(y),D=T||O,$=Object.assign(Object.assign({backgroundColor:y&&!D?y:void 0},null==j?void 0:j.style),p),N=w("tag",n),[I,M,q]=v(N),F=a()(N,null==j?void 0:j.className,{[`${N}-${y}`]:D,[`${N}-has-color`]:y&&!D,[`${N}-hidden`]:!_,[`${N}-rtl`]:"rtl"===k,[`${N}-borderless`]:!f},o,m,M,q),U=e=>{e.stopPropagation(),null==x||x(e),e.defaultPrevented||Z(!1)},[,R]=(0,s.Z)((0,s.w)(e),(0,s.w)(j),{closable:!1,closeIconRender:e=>{let t=r.createElement("span",{className:`${N}-close-icon`,onClick:U},e);return(0,c.wm)(e,t,e=>({onClick:t=>{var n;null===(n=null==e?void 0:e.onClick)||void 0===n||n.call(e,t),U(t)},className:a()(null==e?void 0:e.className,`${N}-close-icon`)}))}}),L="function"==typeof C.onClick||h&&"a"===h.type,H=g||null,z=H?r.createElement(r.Fragment,null,H,h&&r.createElement("span",null,h)):h,V=r.createElement("span",Object.assign({},S,{ref:t,className:F,style:$}),z,R,T&&r.createElement(A,{key:"preset",prefixCls:N}),O&&r.createElement(P,{key:"status",prefixCls:N}));return I(L?r.createElement(d.Z,{component:"Tag"},V):V)});Z.CheckableTag=w;let S=Z},8618:(e,t,n)=>{"use strict";n.d(t,{G:()=>l});var r=n(32415),o=function(e){if((0,r.Z)()&&window.document.documentElement){var t=Array.isArray(e)?e:[e],n=window.document.documentElement;return t.some(function(e){return e in n.style})}return!1},a=function(e,t){if(!o(e))return!1;var n=document.createElement("div"),r=n.style[e];return n.style[e]=t,n.style[e]!==r};function l(e,t){return Array.isArray(e)||void 0===t?o(e):a(e,t)}},90396:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Z});var r=n(10326),o=n(17577),a=n(52783),l=n(36301),i=n(85673),s=n(60816),c=n(92379),d=n(4139),u=n(38106),m=n(59270),p=n(82412);let h=[{key:"title",title:"Announcement title",dataIndex:"title",width:"40%"},{key:"created_on",title:"Date",dataIndex:"created_on"},{key:"created_by",title:"Created by",dataIndex:"created_by"},{key:"updated_by",title:"Updated by",dataIndex:"updated_by"},{key:"visibility",title:"Visibility",dataIndex:"visibility",filters:[{text:"Invisibile",value:!1},{text:"Visible",value:!0}]},{key:"actions",title:"Actions"}],g=[{key:"edit_announcement",label:"Edit Announcement"},{key:"hide_announcement",label:"Hide Announcement"},{key:"unhide_announcement",label:"Unhide Announcement"}];var y=n(45211),x=n(24395),f=n(72380),b=n(91726),v=n(94368),C=n(38579),w=n(40557),k=n(66562),j=n(18201);let A=({visible:e,onClose:t})=>{let[n]=b.Z.useForm(),o=async()=>{try{let e;let r=await n.validateFields(),o=k.Z.get("token");if(o)try{e=(0,j.o)(o)}catch(e){console.error(e)}let a=e?.user_id??"UndefinedAdmin",l={...r,created_by:a,updated_by:a};try{await y.Z.createAnnouncement(l)}catch(e){throw console.error(e),e}n.resetFields(),t()}catch(e){console.log("Validation Failed:",e)}},a=async()=>{n.resetFields(),t()};return r.jsx(v.Z,{title:r.jsx("h3",{style:{textAlign:"center"},children:"Add Announcement"}),open:e,onCancel:a,onOk:o,width:1e3,footer:[r.jsx(s.ZP,{onClick:a,children:"Cancel"},"cancel"),r.jsx(s.ZP,{type:"primary",onClick:o,children:"Submit"},"submit")],children:(0,r.jsxs)(b.Z,{form:n,layout:"vertical",children:[r.jsx(b.Z.Item,{name:"title",label:"Announcement title",rules:[{required:!0,message:"Please enter the announcement title"}],children:r.jsx(m.default,{placeholder:"Announcement title"})}),r.jsx(b.Z.Item,{name:"description",label:"Announcement description",rules:[{required:!0,message:"Please enter the announcement description"}],children:r.jsx(m.default.TextArea,{autoSize:{minRows:4,maxRows:8},placeholder:"Announcement description"})}),r.jsx(b.Z.Item,{name:"file_uploaded",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:r.jsx(C.Z,{name:"file",accept:".jpg,.jpeg,.png",beforeUpload:()=>!1,listType:"picture",maxCount:3,multiple:!0,children:r.jsx(s.ZP,{icon:r.jsx(w.Z,{}),children:"Upload Image (Max: 3)"})})})]})})},_=({visible:e,onClose:t,data:n})=>{let[a]=b.Z.useForm(),[l,i]=(0,o.useState)({...n});(0,o.useEffect)(()=>{i({...n}),a.setFieldsValue({...n})},[n,a]);let c=async()=>{try{let e;let n=await a.validateFields(),r=k.Z.get("token");if(r)try{e=(0,j.o)(r)}catch(e){console.error(e)}let o=e?.user_id??"UndefinedAdmin",i={...n,updated_by:o};try{await y.Z.updateAnnouncement(l._id,i)}catch(e){throw console.error(e),e}a.resetFields(),t()}catch(e){console.log("Validation Failed:",e)}},d=async()=>{a.resetFields(),t()};return r.jsx(v.Z,{title:r.jsx("h3",{style:{textAlign:"center"},children:"Edit Announcement"}),open:e,onCancel:d,onOk:c,width:1e3,footer:[r.jsx(s.ZP,{onClick:d,children:"Cancel"},"cancel"),r.jsx(s.ZP,{type:"primary",onClick:c,children:"Save"},"submit")],children:(0,r.jsxs)(b.Z,{form:a,layout:"vertical",children:[r.jsx(b.Z.Item,{name:"title",label:"Announcement title",rules:[{required:!0,message:"Please enter the announcement title"}],children:r.jsx(m.default,{placeholder:"Announcement title"})}),r.jsx(b.Z.Item,{name:"description",label:"Announcement description",rules:[{required:!0,message:"Please enter the announcement description"}],children:r.jsx(m.default.TextArea,{autoSize:{minRows:4,maxRows:8},placeholder:"Announcement description"})}),r.jsx(b.Z.Item,{name:"file_uploaded",valuePropName:"fileList",getValueFromEvent:e=>Array.isArray(e)?e:e&&e.fileList,children:r.jsx(C.Z,{name:"file",accept:".jpg,.jpeg,.png",beforeUpload:()=>!1,listType:"picture",maxCount:3,multiple:!0,children:r.jsx(s.ZP,{icon:r.jsx(w.Z,{}),children:"Upload Image (Max: 3)"})})})]})})};var P=n(56230),E=n(35047);let Z=()=>{let[e,t]=(0,o.useState)([]),[n,b]=(0,o.useState)([]),[v,C]=(0,o.useState)(!1),[w,k]=(0,o.useState)(!1),[j,Z]=(0,o.useState)(!0),[S,T]=(0,o.useState)([null,null]),[O,D]=(0,o.useState)(null),[$,N]=(0,o.useState)(""),{RangePicker:I}=l.default,M=(0,E.useRouter)(),q=async()=>{try{let e=await y.Z.getAllAnnouncements();t(e),b(e)}catch(e){throw console.error(e),e}finally{Z(!1)}};(0,o.useEffect)(()=>{q()},[M]);let F=(e,t)=>{"edit_announcement"===e?(D(t),k(!0)):"hide_announcement"===e?V(t._id,!1):"unhide_announcement"===e&&V(t._id,!0)},U=e=>{R(e,S)},R=(t,n)=>{let r=RegExp(t,"i"),[o,a]=n||[null,null],l=o?new Date(o).setHours(0,0,0,0):null,i=a?new Date(a).setHours(0,0,0,0):null;b(e.filter(e=>{let t=r.test(e.title),n=new Date(e.created_on)?.setHours(0,0,0,0);return t&&(!l||!i||n>=o&&n<=a)}))},L=e=>g.map(t=>e.visibility&&"unhide_announcement"===t.key||!e.visibility&&"hide_announcement"===t.key?null:{key:t.key,label:r.jsx("div",{onClick:()=>F(t.key,e),children:t.label})}).filter(e=>null!==e),H=e=>r.jsx(i.Z,{menu:{items:L(e)},children:r.jsx(s.ZP,{children:"Actions"})}),z=e=>e?r.jsx(c.Z,{color:"green",bordered:!1,className:"px-3 py-0.5 rounded-xl",children:"Visible"}):r.jsx(c.Z,{color:"red",bordered:!1,className:"px-3 py-0.5 rounded-xl",children:"Invisible"}),V=async(e,t)=>{try{await y.Z.updateAnnouncementVisibility(e,t)}catch(e){throw console.error(e),e}q()},B=h.map(e=>{switch(e.key){case"actions":return{...e,render:(e,t)=>H(t)};case"created_on":return{...e,render:(t,n)=>P.I.formatDate(n[e.key]),sorter:(t,n)=>new Date(t[e.key]).getTime()-new Date(n[e.key]).getTime()};case"visibility":return{...e,render:e=>z(e),onFilter:(e,t)=>t.visibility===e};default:return{...e,sorter:(t,n)=>(t[e.key]||"").toString().localeCompare((n[e.key]||"").toString())}}});return(0,r.jsxs)(a.default,{title:"Announcement Management",children:[r.jsx(A,{visible:v,onClose:()=>{C(!1),q()}}),r.jsx(_,{visible:w,onClose:()=>{k(!1),D(null),q()},data:O}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(d.Z,{style:{justifyContent:"space-between",marginBottom:16},children:[(0,r.jsxs)(u.Z,{style:{display:"flex",gap:"8px"},span:16,children:[r.jsx(m.default,{placeholder:"Search Announcement",onChange:e=>U(e.target.value?[e.target.value]:[]),prefix:r.jsx(x.Z,{}),size:"large",style:{width:"60%"}}),r.jsx(I,{onChange:e=>{T(e),R($,e)},style:{width:"25%"}})]}),r.jsx(s.ZP,{type:"primary",icon:r.jsx(f.Z,{}),iconPosition:"start",onClick:()=>{C(!0)},children:"Add Announcement"})]}),r.jsx(p.Z,{columns:B,dataSource:n.map(e=>({...e,key:e._id})),pagination:{defaultPageSize:10,showSizeChanger:!0,pageSizeOptions:[10,20,50,100]},showSorterTooltip:!1})]})]})}},45211:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(12111),o=n(63506);n(14242);class a{static{this.getAllAnnouncements=async()=>{try{let e=await o.O.get(r.P.FIND_ALL_ANNOUNCEMENT);return e.sort((e,t)=>new Date(t.created_on).getTime()-new Date(e.created_on).getTime()),e}catch(e){throw console.error(e),e}}}static{this.getVisibleAnnouncements=async()=>{try{let e=await o.O.get(r.P.FIND_VISIBLE_ANNOUNCEMENT);return e.sort((e,t)=>new Date(t.created_on).getTime()-new Date(e.created_on).getTime()),e}catch(e){throw console.error(e),e}}}static async createAnnouncement(e){try{await o.O.post(r.P.CREATE_ANNOUNCEMENT,e)}catch(e){throw console.error(e),e}}static{this.updateAnnouncement=async(e,t)=>{try{await o.O.patch(r.P.EDIT_ANNOUNCEMENT,t,{id:e})}catch(e){throw console.error(e),e}}}static{this.updateAnnouncementVisibility=async(e,t)=>{try{await o.O.patch(r.P.EDIT_ANNOUNCEMENT,{visibility:t},{id:e})}catch(e){throw console.error(e),e}}}}},56230:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(88295),o=n.n(r);class a{static{this.DEFAULT_DATE_FORMAT="YYYY-MM-DD"}static{this.DEFAULT_DATE_TIME_FORMAT="YYYY-MM-DD HH:mm:ss"}static{this.CATEGORY_DATE_FORMAT="DD MMM YYYY"}static formatDate(e,t=a.DEFAULT_DATE_FORMAT){return e?o()(e).format(t):""}}},61967:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>i});var r=n(68570);let o=(0,r.createProxy)(String.raw`C:\Users\User\Desktop\Project\fomeda-web\src\app\management\announcement\page.tsx`),{__esModule:a,$$typeof:l}=o;o.default;let i=(0,r.createProxy)(String.raw`C:\Users\User\Desktop\Project\fomeda-web\src\app\management\announcement\page.tsx#default`)},14242:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[8948,349,4052,1775,1726,9270,1259,2991,3118,4368,462,124,706,7042,8579,1098,6301,8492],()=>n(78677));module.exports=r})();